This compiles, which I imagine is sufficient evidence that you're looking at a bug.
{code}

trait Type {
  type S
}

trait Base {
  type T <: Type
  type M = Map[t#S, t#S] forSome { type t <: T with Singleton }
  type N = Map[x.type#S, x.type#S] forSome { val x: T }
}

abstract class Derived extends Base {
  type T = Type { type S = Double }
  override type M = Map[Double, Double]
  override type N = Map[Double, Double]
}

abstract class Derived2 extends Derived {
  val m: M = Map()
  val n: N = Map()
}
{code}
