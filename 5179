(In r23734) Turned an assert/compiler crash into an error message.
Admittedly the error output is still terrible (the XML positioning
looks like it came from an RNG) but more helpful than the crash.
Also misc advantage of a handy new method.  Closes SI-4069, no review.
