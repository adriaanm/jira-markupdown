Having heard that this is abandonware, mostly, here's the fix; in def determinize, add an if below q0 setup, as shown below. _Untested_.

{code}
val q0 = _initialBitSet
states = states + q0
if (nfa.containsFinal(q0))
	          finals = finals.update(q0, selectTag(q0,nfa.finals));
{code}

