I think the correct fix is to change the {{readResolve}} method of the nested object to the following:

{code}
def readResolve() = {
  if ($outer.attr$module == null) this
  else $outer.attr$module
}
{code}

Since the field ({{attr$module}}) is private, we might create another name-mangled accessor for it (instead of making the field public)

Q: should the method be synchronized?

CC [~prokopec]
