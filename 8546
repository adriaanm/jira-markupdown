Kris is not exaggerating when he says that this would involve thousands of lines of refactoring.  You're right that this ticket wouldn't exist if the compiler had told us about this issue, since we would have caught the issue early and never would have written our code in this fashion.  However, the fact is that the compiler *didn't*, we *did*, and now we're in a very serious mess.  I doubt that we're the only ones.

The fact is that this is a silent failure of the worst sort.  It is a bug in the compiler that introduces a failure condition in your code that is likely to *only* exist in production (where you see realistic dataset sizes).  Compiler bugs are bad enough.  Silent compiler bugs are worse.  Silent compiler bugs that are only identifiable by reading the bytecode are worse still.  Silent compiler bugs that cause your code to crash *only* in production are DEATH.

My point is this: even though there is a workaround, it's not one that is practical for many people (including us).  Even if it were, this bug needs to be fixed.  There is almost certainly a lot of code out there, right now, that is broken without anyone knowing.  People can't use a workaround if they don't know they have a problem.
