Another test case that crashes under my proposed fix:

{code}
object Test {
  def foo1[A1] = new { private type A2 = A1 ; def bar: A2 = ??? }
  // def foo2[A1] = new {         type A2 = A1 ; def bar: A2 = ??? }
 
  def f1: Int = foo1[Int].bar
  // def f2: Int = foo2[Int].bar
}
{code}
