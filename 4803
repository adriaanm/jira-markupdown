A-ha.  Uncurry:
{code}
// a local variable that is mutable and free somewhere later should be lifted
// as lambda lifting (coming later) will wrap 'rhs' in an Ref object.
if (!sym.owner.isSourceMethod || (sym.isVariable && freeMutableVars(sym)))
  withNeedLift(true) { super.transform(tree) }
else
  super.transform(tree)  
{code}
So that is where var n in my example is supposed to be lifted, but it is not because it does not appear in freeMutableVars.  The logic in freeLocalsTraverser is incomplete.  I'm attaching a hacked together attempt to improve it: it needs more work but should be in the ballpark.  With the patch in place the submitter's test case runs without verify error as does my example in comments.
