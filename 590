Please see bug SI-738 about a related issue that was fixed by commit r14642 as well. It has a 6-liner test case that should make it easy to reproduce.
