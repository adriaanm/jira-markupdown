16 months later, extempore determines this is essentially a duplicate of SI-653.  Similar code and same assertion failing, anyway.
