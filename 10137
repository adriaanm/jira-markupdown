The residual test is added in https://github.com/scala/scala/pull/3514 which also reverts the fix for the originally reported case, as it was responsible for the regression noted in the comments of SI-5900
