When the immutable HashMap is being updated by many threads simultaneously, exceptions occur:

java.lang.NullPointerException
        at scala.collection.immutable.HashMap.undo$$1(HashMap.scala:130)
        at scala.collection.immutable.HashMap.undo$$1(HashMap.scala:130)
        at scala.collection.immutable.HashMap.undo$$1(HashMap.scala:130)
        at scala.collection.immutable.HashMap.undo$$1(HashMap.scala:130)
        at scala.collection.immutable.HashMap.makeCopy(HashMap.scala:154)
        at scala.collection.immutable.HashMap.makeCopyIfUpdated(HashMap.scala:161)
        at scala.collection.immutable.HashMap.update(HashMap.scala:66)
        at scala.collection.immutable.Map$$class.$$plus(Map.scala:66)
        at scala.collection.immutable.HashMap.$$plus(HashMap.scala:41)

