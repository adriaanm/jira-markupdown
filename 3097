I have further reduced the test:

{code}
package p1 {

  trait T1 {
    def f1(code : Int => Int) {}
    protected def bug(p : Int = 1) : Int = 1 // without 'protected' compiles fine
  }

  trait T2 extends T1 {
    def f2(code : Int => Int) {}
  }

}

package p2 { // all being in the same package compiles fine
  import p1._

  trait T3 extends T2 {
    def f3 : Unit = f2(bug) // without this method compiles fine
  }

  trait T4 extends T3 {
    def f4 : Unit = f1 {
      bug // replaced with the next line compiles fine
      //_ => 1
    }
  }
}
{code}
