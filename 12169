[~ruippeixotog] - I think under the circumstances special-casing {{max}} to check whether it's got an instance of Ordering.Double or Ordering.Float is a reasonable solution.

You could also explicitly check the semantics of NaN values: a NaN is _not even equal to itself_, which lets you detect it.  But I'm not sure it's worth the extra runtime.
