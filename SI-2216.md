Hi all. I use IDEA for my Scala-development and it generates import-statements for me. Say I have the following classes:

no.officenet.origo.core.infrastructure.menu.MenuItem
no.officenet.origo.core.domain.model.AbstractDomainObject

Now, MenuItem extends AbstractDomainObject and has the following import (generated by IDEA's scala-plugin):

import domain.model.AbstractDomainObject

But compiling with trunk(r18409) now fails with the following compile-error:
{code}
/home/andreak/dev/officenet_origo/trunk/origo-core/src/main/scala/no/officenet/origo/core/infrastructure/menu/MenuItem.scala:8: error: not found: value domain            
import domain.model.AbstractDomainObject                                                                                                                                  
       ^                                                                                                                                                                  
{code}
If I change the import to the fully-qualified class-name, it works:
import no.officenet.origo.core.domain.model.AbstractDomainObject

Are fully qualified names the "new way" to import stuff in 2.8.0?
Package handling has changed recently (late July). It's also been discussed extensively on scala-user.

Here's an email from Ricky Clarkson to scala-internals that summaries the changes (it may be a good idea to follow that list if you like using the bleeding edge -- note that the list is only for developers discussing their work on the compiler/core libraries):


  Before:

  package my.scala.stuff

  Here, scala.List(3,4,5) looks for my.scala.List(3,4,5), and gives a
  compile error.

  After:

  package my.scala.stuff

  Here, scala.List(3,4,5) gets _root_.scala.List, and works fine.

  Suppose I _want_ scala.List to be my.scala.List:

  package my
  package scala.stuff

  Here, scala.List(3,4,5) looks for my.scala.List(3,4,5).

  A large recent thread on imports in the scala-user thread gives some
  background.  I expect someone else is typing a better explanation up.



hope this helps

adriaan

Can somebody mention in which revision this change got commited?
I've now corrected my imports but I get an internal-compiler error still (using r18445) and I'm wondering if it's related to this somehow.
{code}
[INFO] Compiling 593 source files to /home/andreak/dev/officenet_origo/trunk/origo-core/target/classes
[INFO] use scala command with args in file
Exception in thread "main" java.lang.AssertionError: assertion failed
        at scala.Predef$$.assert(Predef.scala:92)
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.<init>(Implicits.scala:133)
        at scala.tools.nsc.typechecker.Implicits$$class.inferImplicit(Implicits.scala:59)
{code}
(Yes, I know it's impossible to help me based on this stack-trace but I'm providing it just to inform what kind of error occurs...)

It's working fine with my corrected imports using r18350
I'm still getting the Exception in my comment above with r18465, any hints on how to better diagnose it? It's a mixed java/scala Maven-project.

Should I open a new ticket for this?

For what it's worth, here is the complete stack-trace:
{code}
[INFO] Compiling 589 source files to /home/andreak/dev/officenet_origo/trunk/origo-core/target/classes                        
[INFO] use scala command with args in file                                                                                    
Exception in thread "main" java.lang.AssertionError: assertion failed                                                         
        at scala.Predef$$.assert(Predef.scala:92)                                                                              
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.<init>(Implicits.scala:133)                                   
        at scala.tools.nsc.typechecker.Implicits$$class.inferImplicit(Implicits.scala:59)                                      
        at scala.tools.nsc.Global$$analyzer$$.inferImplicit(Global.scala:348)                                                   
        at scala.tools.nsc.typechecker.Typers$$Typer.wrapImplicit$$1(Typers.scala:223)                                          
        at scala.tools.nsc.typechecker.Typers$$Typer.inferView(Typers.scala:227)                                               
        at scala.tools.nsc.typechecker.Typers$$Typer.inferView(Typers.scala:245)                                               
        at scala.tools.nsc.typechecker.Typers$$Typer.adaptToMember(Typers.scala:995)                                           
        at scala.tools.nsc.typechecker.Typers$$Typer.tryTypedApply$$1(Typers.scala:2988)                                        
        at scala.tools.nsc.typechecker.Typers$$Typer.typedApply$$1(Typers.scala:3018)                                           
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3612)                                                 
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.typedImplicit0(Implicits.scala:311)                           
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.typedImplicit(Implicits.scala:257)                            
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.tryImplicit$$1(Implicits.scala:424)                            
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch$$$$anonfun$$appInfos$$1$$1.apply(Implicits.scala:432)              
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch$$$$anonfun$$appInfos$$1$$1.apply(Implicits.scala:429)              
        at scala.collection.generic.LinearSequenceTemplate$$class.foreach(LinearSequenceTemplate.scala:82)                     
        at scala.collection.immutable.List.foreach(List.scala:26)                                                             
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.appInfos$$1(Implicits.scala:429)                               
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch$$$$anonfun$$applicableInfos$$1.apply(Implicits.scala:440)         
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch$$$$anonfun$$applicableInfos$$1.apply(Implicits.scala:440)         
        at scala.collection.generic.TraversableTemplate$$$$anonfun$$map$$1.apply(TraversableTemplate.scala:178)                   
        at scala.collection.generic.TraversableTemplate$$$$anonfun$$map$$1.apply(TraversableTemplate.scala:178)                   
        at scala.collection.generic.LinearSequenceTemplate$$class.foreach(LinearSequenceTemplate.scala:82)                     
        at scala.collection.immutable.List.foreach(List.scala:26)                                                             
        at scala.collection.generic.TraversableTemplate$$class.map(TraversableTemplate.scala:178)                              
        at scala.collection.immutable.List.map(List.scala:26)                                                                 
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.applicableInfos(Implicits.scala:440)                          
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.searchImplicit(Implicits.scala:461)                           
        at scala.tools.nsc.typechecker.Implicits$$ImplicitSearch.bestImplicit(Implicits.scala:690)                             
        at scala.tools.nsc.typechecker.Implicits$$class.inferImplicit(Implicits.scala:59)                                      
        at scala.tools.nsc.Global$$analyzer$$.inferImplicit(Global.scala:348)                                                   
        at scala.tools.nsc.typechecker.Typers$$Typer.wrapImplicit$$1(Typers.scala:223)                                          
        at scala.tools.nsc.typechecker.Typers$$Typer.inferView(Typers.scala:227)                                               
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anon$$3.isCoercible(Typers.scala:175)                                     
        at scala.tools.nsc.typechecker.Infer$$Inferencer.isCompatible(Infer.scala:446)                                         
        at scala.tools.nsc.typechecker.Infer$$Inferencer.isWeaklyCompatible(Infer.scala:451)                                   
        at scala.tools.nsc.typechecker.Infer$$Inferencer.methTypeArgs(Infer.scala:590)                                         
        at scala.tools.nsc.typechecker.Infer$$Inferencer.typesCompatible$$1(Infer.scala:724)                                    
        at scala.tools.nsc.typechecker.Infer$$Inferencer.scala$$tools$$nsc$$typechecker$$Infer$$Inferencer$$$$isApplicable(Infer.scala:738)
        at scala.tools.nsc.typechecker.Infer$$Inferencer.isApplicableSafe(Infer.scala:779)                                          
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$25.apply(Typers.scala:1945)                                           
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$25.apply(Typers.scala:1944)                                           
        at scala.collection.generic.TraversableTemplate$$$$anonfun$$filter$$1.apply(TraversableTemplate.scala:201)                     
        at scala.collection.generic.LinearSequenceTemplate$$class.foreach(LinearSequenceTemplate.scala:82)                          
        at scala.collection.immutable.List.foreach(List.scala:26)                                                                  
        at scala.collection.generic.TraversableTemplate$$class.filter(TraversableTemplate.scala:200)                                
        at scala.collection.immutable.List.filter(List.scala:26)                                                                   
        at scala.tools.nsc.symtab.Symbols$$Symbol.filter(Symbols.scala:985)                                                         
        at scala.tools.nsc.typechecker.Typers$$Typer.doTypedApply(Typers.scala:1944)                                                
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$tryTypedApply$$1$$1.apply(Typers.scala:2963)                            
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$tryTypedApply$$1$$1.apply(Typers.scala:2963)                            
        at scala.tools.nsc.typechecker.Typers$$Typer.silent(Typers.scala:696)                                                       
        at scala.tools.nsc.typechecker.Typers$$Typer.tryTypedApply$$1(Typers.scala:2963)                                             
        at scala.tools.nsc.typechecker.Typers$$Typer.typedApply$$1(Typers.scala:3018)                                                
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3612)                                                      
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:3717)                                                       
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:3772)                                                       
        at scala.tools.nsc.typechecker.Typers$$Typer.transformedOrTyped(Typers.scala:3830)                                          
        at scala.tools.nsc.typechecker.Typers$$Typer.typedDefDef(Typers.scala:1511)                                                 
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3453)                                                      
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:3717)                                                       
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:3761)                                                       
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:1778)                                                 
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$21.apply(Typers.scala:1835)                                           
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$21.apply(Typers.scala:1835)                                           
        at scala.collection.immutable.List$$.loop$$4(List.scala:712)                                                                 
        at scala.collection.immutable.List$$.mapConserve(List.scala:729)                                                            
        at scala.collection.immutable.List$$.loop$$4(List.scala:716)                                                                 
        at scala.collection.immutable.List$$.mapConserve(List.scala:729)                                                            
        at scala.collection.immutable.List$$.loop$$4(List.scala:716)                                                                 
        at scala.collection.immutable.List$$.mapConserve(List.scala:729)                                                            
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:1835)                                                  
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1355)                                               
        at scala.tools.nsc.typechecker.Typers$$Typer.typedClassDef(Typers.scala:1206)                                               
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3444)                                                      
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:3717)                                                       
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:3761)                                                       
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:1778)                                                 
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$21.apply(Typers.scala:1835)                                           
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$21.apply(Typers.scala:1835)                                           
        at scala.collection.immutable.List$$.loop$$4(List.scala:712)                                                                 
        at scala.collection.immutable.List$$.mapConserve(List.scala:729)                                                            
        at scala.collection.immutable.List$$.loop$$4(List.scala:716)                                                                 
        at scala.collection.immutable.List$$.mapConserve(List.scala:729)                                                            
        at scala.collection.immutable.List$$.loop$$4(List.scala:716)                                                                 
        at scala.collection.immutable.List$$.mapConserve(List.scala:729)                                                            
        at scala.collection.immutable.List$$.loop$$4(List.scala:716)                                                                 
        at scala.collection.immutable.List$$.mapConserve(List.scala:729)                                                            
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:1835)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3440)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:3717)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:3761)
        at scala.tools.nsc.typechecker.Analyzer$$typerFactory$$$$anon$$2.apply(Analyzer.scala:57)
        at scala.tools.nsc.Global$$GlobalPhase.applyPhase(Global.scala:329)
        at scala.tools.nsc.typechecker.Analyzer$$typerFactory$$$$anon$$2$$$$anonfun$$run$$1.apply(Analyzer.scala:51)
        at scala.tools.nsc.typechecker.Analyzer$$typerFactory$$$$anon$$2$$$$anonfun$$run$$1.apply(Analyzer.scala:51)
        at scala.collection.Iterator$$class.foreach(Iterator.scala:500)
        at scala.collection.mutable.ListBuffer$$$$anon$$1.foreach(ListBuffer.scala:280)
        at scala.tools.nsc.typechecker.Analyzer$$typerFactory$$$$anon$$2.run(Analyzer.scala:51)
        at scala.tools.nsc.Global$$Run.compileSources(Global.scala:805)
        at scala.tools.nsc.Global$$Run.compile(Global.scala:888)
        at scala.tools.nsc.Main$$.process(Main.scala:91)
        at scala.tools.nsc.Main$$.main(Main.scala:105)
        at scala.tools.nsc.Main.main(Main.scala)
{code}
I have similar problem (relative imports do not work), and simple test case to reproduce it:

{code}
[nga@fastshot:~/tmp/hello]% cat logging.scala
package ru.yandex.misc.logging
class Logger

[nga@fastshot:~/tmp/hello]% cat jdbc.scala
package ru.yandex.misc.jdbc
import logging._

class Z

[nga@fastshot:~/tmp/hello]% rm **/*.class

[nga@fastshot:~/tmp/hello]% scalac -version
Scala compiler version 2.7.5.final -- Copyright 2002-2009, LAMP/EPFL

[nga@fastshot:~/tmp/hello]% scalac jdbc.scala logging.scala 

[nga@fastshot:~/tmp/hello]% rm **/*.class

[nga@fastshot:~/tmp/hello]% ~/devel/left/scala/trunk/bin/scalac -version
Scala compiler version 2.8.0.r18478-b20090814070507 -- Copyright 2002-2009, LAMP/EPFL

[nga@fastshot:~/tmp/hello]% ~/devel/left/scala/trunk/bin/scalac *.scala
jdbc.scala:2: error: not found: value logging
import logging._
       ^
one error found
{code}
this is expected behavior with current trunk. you need to change {{jdbc.scala}}

{code}
package ru.yandex.misc
package jdbc
import logging._

class Z
{code}


Replying to [comment:11 stepancheg]:
> I have similar problem (relative imports do not work), and simple test case to reproduce it:
> 
> {code}
> [nga@fastshot:~/tmp/hello]% cat logging.scala
> package ru.yandex.misc.logging
> class Logger
> 
> [nga@fastshot:~/tmp/hello]% cat jdbc.scala
> package ru.yandex.misc.jdbc
> import logging._
> 
> class Z
> 
> [nga@fastshot:~/tmp/hello]% rm **/*.class
> 
> [nga@fastshot:~/tmp/hello]% scalac -version
> Scala compiler version 2.7.5.final -- Copyright 2002-2009, LAMP/EPFL
> 
> [nga@fastshot:~/tmp/hello]% scalac jdbc.scala logging.scala 
> 
> [nga@fastshot:~/tmp/hello]% rm **/*.class
> 
> [nga@fastshot:~/tmp/hello]% ~/devel/left/scala/trunk/bin/scalac -version
> Scala compiler version 2.8.0.r18478-b20090814070507 -- Copyright 2002-2009, LAMP/EPFL
> 
> [nga@fastshot:~/tmp/hello]% ~/devel/left/scala/trunk/bin/scalac *.scala
> jdbc.scala:2: error: not found: value logging
> import logging._
>        ^
> one error found
> }}

Let's make Scala hardest to learn language ever with million rules and billion exceptions!

AFAIU, there is no currently relative import syntax that works on both 2.7 and 2.8? So changing all imports to absolute is required for seamless migration?


Replying to [comment:12 rytz]:
> this is expected behavior with current trunk. you need to change {{jdbc.scala}}
> 
{code}
package ru.yandex.misc
package jdbc
import logging._

class Z
{code}
