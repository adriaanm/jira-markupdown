Dup of SI-8219. I'll add this test case to that ticket.

I tried to fix that for 2.11.0 (in https://github.com/scala/scala/pull/3460) but ran into SI-8230.
