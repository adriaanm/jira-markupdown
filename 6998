I can't explain the iterator code simply; but it is fine.  The long stack trace and stack exhaustion is from the chaining of iterators with ++, and it would be interesting to know where that chaining is originating - but compile.txt tells me nothing.
