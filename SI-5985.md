There is no subclass of {{scala.tools.partest.DirectTest}} to compare javap for output classfiles (as generated by {{-Ygen-javap}}).

That's necessary to test, for example, whether certain JVM attributes are being emitted (motivation: SI-5983)

In case javap is not available on the machine running {{partest}}, ASM's {{scala.tools.asm.util.Textifier}} could be used instead (via GenASM).

Work in progress: https://github.com/magarciaEPFL/scala/compare/ticket-SI-5985

As discussed at [scala-internals/OhGZeyBAGig | https://groups.google.com/d/topic/scala-internals/OhGZeyBAGig/discussion] , verbatim comparison of javap output is inflexible. 

That can be addressed in a manner similar to {{scala.tools.partest.CompilerTest}} :
- emit classfiles as usual
- have a {{DirectTest}} subclass parse each classfile using ASM's Tree API
- have an "acceptor" class provided as part of the test that inspects the trees parsed above.
  The ASM Tree API does not support a "bytecode query language" nor a DSL to that effect, but still drilling into details of interest should be easier to maintain than verbatim javap output.


https://issues.scala-lang.org/browse/SI-6894 includes simple JavapTest for asserts about textual output, using the repl facility. Crude for when crudity suffices.
