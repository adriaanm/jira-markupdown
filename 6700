The NPE is of course a bug. The false value is not: use xml_== instead -- then you'll run into the NPE bug :-D
