(In r23010) closes scala/bug#1569, scala/bug#3731: refactored dependent method types to get rid of debruijn indices and use singleton types instead.

this is the core of the dependent types refactoring, no implicit or inference changes

(one baffling discovery: resultType should drop annotations that don't subclass TypeConstraint, even in the trivial case... wow -- thanks to Tiark for helping me figure it out on a terrace in Barcelona
TODO: probably need a more principled approach to the propagation of plugin type-annotations)

review by odersky
