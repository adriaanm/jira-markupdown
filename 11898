Actually, I really think it is a bug. Even if A's definition of R is not first in linearization, it should not be hidden. Only the last definition of R is seen by the compiler, which is quite annoying. Consider the following variation:

{code} 
trait S1 {def v1:Any}
trait S2 {def v2:Any}

trait A {self: B with A =>
  type R <: S2
  def f(r: R) = r.v2               //compiles using self declaration: B with A
  def g(r: R) = r.v1              //compiles using self declaration: A with B
}
  
trait B {
  type R <: S1
}
{code} 

Actually, it seems it is a quite important problem with Scala type system. Someone directed me to https://issues.scala-lang.org/browse/SI-7255 which contains details about that problem...
