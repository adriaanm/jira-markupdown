The following code crashes the compiler (tested again Beta1-RC6, 2.7.4 works):

{code}
object CrashTest {
  type Rule = (String, String)
  type Rules = Map[String, String]
  type Terminals = Set[String]
  val RulePattern = """(.*?)\s+->\s+(\.?)(.*)""".r
  val CommentPattern = "#.*|^\\s*$$".r
  
  object Rule {
    def unapplySeq(line: String) = line match {
      case RulePattern(pattern, "", replacement) => Some(Seq(pattern -> replacement))
      case RulePattern(pattern, ".", replacement) => Some(Seq(pattern -> replacement, replacement))
      case _ => None
    }
  }
  
  def computeRules(lines: Iterator[String]): (Rules, Terminals) = {
    (lines foldLeft (Map.empty: Rules, Set.empty: Terminals)) { 
      case ((rules, terminators), Rule(rule : Rule)) => (rules + rule, terminators)
      case ((rules, terminators), Rule(rule : Rule, terminator : String)) => (rules + rule, terminators + terminator)
      case (rulesAndTerminators, CommentPattern()) => rulesAndTerminators
      case other => error("Syntax error on line "+other)
    }
  }
}
{code}

Crash output:

{code}
C:\Workset>scalac CrashTest.scala
Exception in thread "main" scala.tools.nsc.symtab.Types$$TypeError: too many arguments for method body%1: (val rules: sca
la.collection.immutable.Map[java.lang.String,java.lang.String],val terminators: scala.collection.immutable.Set[java.lang
.String])(scala.collection.immutable.Map[java.lang.String,java.lang.String], scala.collection.immutable.Set[java.lang.St
ring])
        at scala.tools.nsc.typechecker.Contexts$$Context.error(Contexts.scala:318)
        at scala.tools.nsc.typechecker.Infer$$Inferencer.error(Infer.scala:273)
        at scala.tools.nsc.typechecker.Infer$$Inferencer.errorTree(Infer.scala:277)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$tryNamesDefaults$$1$$1.apply(Typers.scala:2301)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$tryNamesDefaults$$1$$1.apply(Typers.scala:2301)
        at scala.Option.getOrElse(Option.scala:59)
        at scala.tools.nsc.typechecker.Typers$$Typer.tryNamesDefaults$$1(Typers.scala:2300)
        at scala.tools.nsc.typechecker.Typers$$Typer.doTypedApply(Typers.scala:2363)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedApply$$1(Typers.scala:3303)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3913)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4059)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4117)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedIf$$1(Typers.scala:3066)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3794)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4059)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedBlock(Typers.scala:1906)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3758)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4059)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedBlock(Typers.scala:1906)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3758)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4059)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedBlock(Typers.scala:1906)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3758)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4059)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedBlock(Typers.scala:1906)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3758)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4059)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedBlock(Typers.scala:1906)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3758)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4059)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4104)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixTypes.success(ParallelMatching.scala:581)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$RuleApplication.codegen(ParallelMatching.scala:249)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixTypes.tree(ParallelMatching.scala:587)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$Rep.applyRule(ParallelMatching.scala:781)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixTypes.success(ParallelMatching.scala:581)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$RuleApplication.codegen(ParallelMatching.scala:249)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixTypes.tree(ParallelMatching.scala:587)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$Rep.applyRule(ParallelMatching.scala:781)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixSequence.success(ParallelMatching.scala:469)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$RuleApplication.codegen(ParallelMatching.scala:249)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixSequence.tree(ParallelMatching.scala:472)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$Rep.applyRule(ParallelMatching.scala:781)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixSequence.failure(ParallelMatching.scala:470)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$RuleApplication.codegen(ParallelMatching.scala:249)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixSequence.tree(ParallelMatching.scala:472)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$Rep.applyRule(ParallelMatching.scala:781)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixUnapply.success(ParallelMatching.scala:432)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$RuleApplication.codegen(ParallelMatching.scala:249)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixUnapply.tree(ParallelMatching.scala:438)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$Rep.applyRule(ParallelMatching.scala:781)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixTypes.success(ParallelMatching.scala:581)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$RuleApplication.codegen(ParallelMatching.scala:249)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixTypes.tree(ParallelMatching.scala:587)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$Rep.applyRule(ParallelMatching.scala:781)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixTypes.success(ParallelMatching.scala:581)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$RuleApplication.codegen(ParallelMatching.scala:249)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$MixTypes.tree(ParallelMatching.scala:587)
        at scala.tools.nsc.matching.ParallelMatching$$MatchMatrix$$Rep.applyRule(ParallelMatching.scala:781)
        at scala.tools.nsc.matching.TransMatcher$$class.handlePattern(TransMatcher.scala:82)
        at scala.tools.nsc.transform.ExplicitOuter.handlePattern(ExplicitOuter.scala:20)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.matchTranslation(ExplicitOuter.scala:390)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:479)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$5.apply(Trees.scala:1463)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$5.apply(Trees.scala:1461)
        at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:1581)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:37)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:30)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1460)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:52)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:448)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:1573)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:1571)
        at scala.collection.immutable.List.loop$$1(List.scala:116)
        at scala.collection.immutable.List.mapConserve(List.scala:133)
        at scala.tools.nsc.ast.Trees$$Transformer.transformStats(Trees.scala:1571)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1477)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.scala$$tools$$nsc$$transform$$TypingTransformers$$T
ypingTransformer$$$$super$$transform(TypingTransformers.scala:48)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer$$$$anonfun$$transform$$1.apply(TypingTransformers.
scala:48)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer$$$$anonfun$$transform$$1.apply(TypingTransformers.
scala:48)
        at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:1581)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:37)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:30)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:48)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:428)
        at scala.tools.nsc.ast.Trees$$Transformer.transformTemplate(Trees.scala:1557)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$2.apply(Trees.scala:1447)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$2.apply(Trees.scala:1446)
        at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:1581)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:37)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:30)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1445)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:52)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:482)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:1573)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:1571)
        at scala.collection.immutable.List.loop$$1(List.scala:116)
        at scala.collection.immutable.List.mapConserve(List.scala:133)
        at scala.tools.nsc.ast.Trees$$Transformer.transformStats(Trees.scala:1571)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1479)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:52)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:482)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformTrees$$1.apply(Trees.scala:1555)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformTrees$$1.apply(Trees.scala:1555)
        at scala.collection.immutable.List.loop$$1(List.scala:116)
        at scala.collection.immutable.List.mapConserve(List.scala:133)
        at scala.tools.nsc.ast.Trees$$Transformer.transformTrees(Trees.scala:1555)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1517)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:52)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:482)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$5.apply(Trees.scala:1463)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$5.apply(Trees.scala:1461)
        at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:1581)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:37)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:30)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1460)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:52)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:448)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:1573)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:1571)
        at scala.collection.immutable.List.loop$$1(List.scala:116)
        at scala.collection.immutable.List.mapConserve(List.scala:133)
        at scala.collection.immutable.List.loop$$1(List.scala:120)
        at scala.collection.immutable.List.mapConserve(List.scala:133)
        at scala.tools.nsc.ast.Trees$$Transformer.transformStats(Trees.scala:1571)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1477)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.scala$$tools$$nsc$$transform$$TypingTransformers$$T
ypingTransformer$$$$super$$transform(TypingTransformers.scala:48)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer$$$$anonfun$$transform$$1.apply(TypingTransformers.
scala:48)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer$$$$anonfun$$transform$$1.apply(TypingTransformers.
scala:48)
        at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:1581)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:37)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:30)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:48)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:428)
        at scala.tools.nsc.ast.Trees$$Transformer.transformTemplate(Trees.scala:1557)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$2.apply(Trees.scala:1447)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$2.apply(Trees.scala:1446)
        at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:1581)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:37)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:30)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1445)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:52)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:482)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:1573)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:1571)
        at scala.collection.immutable.List.loop$$1(List.scala:116)
        at scala.collection.immutable.List.mapConserve(List.scala:133)
        at scala.tools.nsc.ast.Trees$$Transformer.transformStats(Trees.scala:1571)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$1.apply(Trees.scala:1441)
        at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$1.apply(Trees.scala:1441)
        at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:1581)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:37)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:30)
        at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:1440)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.scala$$tools$$nsc$$transform$$TypingTransformers$$T
ypingTransformer$$$$super$$transform(TypingTransformers.scala:48)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer$$$$anonfun$$transform$$2.apply(TypingTransformers.
scala:50)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer$$$$anonfun$$transform$$2.apply(TypingTransformers.
scala:50)
        at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:1581)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:37)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.atOwner(TypingTransformers.scala:30)
        at scala.tools.nsc.transform.TypingTransformers$$TypingTransformer.transform(TypingTransformers.scala:50)
        at scala.tools.nsc.transform.ExplicitOuter$$OuterPathTransformer.transform(ExplicitOuter.scala:230)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transform(ExplicitOuter.scala:482)
        at scala.tools.nsc.ast.Trees$$Transformer.transformUnit(Trees.scala:1574)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.scala$$tools$$nsc$$transform$$ExplicitOuter$$Expl
icitOuterTransformer$$$$super$$transformUnit(ExplicitOuter.scala:492)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer$$$$anonfun$$transformUnit$$1.apply(ExplicitOuter
.scala:492)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer$$$$anonfun$$transformUnit$$1.apply(ExplicitOuter
.scala:492)
        at scala.tools.nsc.symtab.SymbolTable.atPhase(SymbolTable.scala:99)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transformUnit(ExplicitOuter.scala:492)
        at scala.tools.nsc.transform.ExplicitOuter$$ExplicitOuterTransformer.transformUnit(ExplicitOuter.scala:293)
        at scala.tools.nsc.transform.Transform$$Phase.apply(Transform.scala:31)
        at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$applyPhase$$1.apply(Global.scala:281)
        at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$applyPhase$$1.apply(Global.scala:281)
        at scala.tools.nsc.reporters.Reporter.withSource(Reporter.scala:48)
        at scala.tools.nsc.Global$$GlobalPhase.applyPhase(Global.scala:281)
        at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$run$$1.apply(Global.scala:259)
        at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$run$$1.apply(Global.scala:259)
        at scala.collection.Iterator$$class.foreach(Iterator.scala:582)
        at scala.collection.mutable.ListBuffer$$$$anon$$1.foreach(ListBuffer.scala:285)
        at scala.tools.nsc.Global$$GlobalPhase.run(Global.scala:259)
        at scala.tools.nsc.Global$$Run.compileSources(Global.scala:749)
        at scala.tools.nsc.Global$$Run.compile(Global.scala:839)
        at scala.tools.nsc.Main$$.process(Main.scala:109)
        at scala.tools.nsc.Main$$.main(Main.scala:123)
        at scala.tools.nsc.Main.main(Main.scala)
{code}

Duplicate of SI-2310 (and SI-2728).
