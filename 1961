this is a duplicate of scala/bug#3340, which I hope to fix this summer
