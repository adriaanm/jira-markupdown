{code}
import scala.reflect._
import scala.reflect.api._

object Foo extends App {
  println(scala.reflect.Code.lift{
    @serializable class C
  }.tree.toString)
}
{code}

{code}
Exception in thread "main" scala.reflect.internal.Types$TypeError: type mismatch;
 found   : List[$mr.AnnotationInfo]
 required: $mr.AnnotationInfo
        at scala.tools.nsc.typechecker.Contexts$Context.error(Contexts.scala:283)
        at scala.tools.nsc.typechecker.Infer$Inferencer.error(Infer.scala:207)
        at scala.tools.nsc.typechecker.Infer$Inferencer.typeError(Infer.scala:217)
        at scala.tools.nsc.typechecker.Infer$Inferencer.typeErrorTree(Infer.scala:255)
        at scala.tools.nsc.typechecker.Typers$Typer.adapt(Typers.scala:982)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4320)
        at scala.tools.nsc.typechecker.Typers$Typer.typedArg(Typers.scala:2162)
        at scala.tools.nsc.typechecker.Typers$Typer.loop$1(Typers.scala:2181)
        at scala.tools.nsc.typechecker.Typers$Typer.typedArgs(Typers.scala:2186)
        at scala.tools.nsc.typechecker.Typers$Typer.doTypedApply(Typers.scala:2415)
        at scala.tools.nsc.typechecker.Typers$Typer.typedApply$1(Typers.scala:3431)
        at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4156)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4311)
        at scala.tools.nsc.typechecker.Typers$Typer.typedStat$1(Typers.scala:2066)
        at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$25.apply(Typers.scala:2155)
        at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$25.apply(Typers.scala:2155)
        at scala.collection.immutable.List.loop$1(List.scala:151)
        at scala.collection.immutable.List.mapConserve(List.scala:167)
        at scala.tools.nsc.typechecker.Typers$Typer.typedStats(Typers.scala:2155)
        at scala.tools.nsc.typechecker.Typers$Typer.typedBlock(Typers.scala:1874)
        at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4022)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4311)
        at scala.tools.nsc.typechecker.Typers$Typer.typedQualifier(Typers.scala:4392)
        at scala.tools.nsc.typechecker.Typers$Typer.typedQualifier(Typers.scala:4398)
        at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4196)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4311)
        at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4126)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4311)
        at scala.tools.nsc.typechecker.Typers$Typer.typedArg(Typers.scala:2162)
        at scala.tools.nsc.typechecker.Typers$Typer.loop$1(Typers.scala:2181)
        at scala.tools.nsc.typechecker.Typers$Typer.typedArgs(Typers.scala:2186)
        at scala.tools.nsc.typechecker.Typers$Typer.doTypedApply(Typers.scala:2415)
        at scala.tools.nsc.typechecker.Typers$Typer.typedApply$1(Typers.scala:3431)
        at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4156)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4311)
        at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4370)
        at scala.tools.nsc.typechecker.Typers$Typer.typedPos(Typers.scala:4374)
        at scala.tools.nsc.transform.LiftCode$Codifier.transform(LiftCode.scala:144)
        at scala.reflect.api.Trees$Transformer.transform(Trees.scala:1206)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.LiftCode$Codifier.transform(LiftCode.scala:168)
        at scala.reflect.api.Trees$Transformer.transform(Trees.scala:1206)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.LiftCode$Codifier.transform(LiftCode.scala:168)
        at scala.reflect.api.Trees$Transformer.transform(Trees.scala:1198)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.LiftCode$Codifier.transform(LiftCode.scala:168)
        at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:1232)
        at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:1232)
        at scala.collection.immutable.List.loop$1(List.scala:151)
        at scala.collection.immutable.List.mapConserve(List.scala:167)
        at scala.reflect.api.Trees$Transformer.transformTrees(Trees.scala:1232)
        at scala.reflect.api.Trees$Transformer.transform(Trees.scala:1198)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.LiftCode$Codifier.transform(LiftCode.scala:168)
        at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1$$anonfun$apply$2.apply(Trees.scala:1249)
        at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1$$anonfun$apply$2.apply(Trees.scala:1249)
        at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:1257)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:19)
        at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:1249)
        at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:1248)
        at scala.collection.immutable.List.loop$1(List.scala:151)
        at scala.collection.immutable.List.mapConserve(List.scala:167)
        at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:1248)
        at scala.reflect.api.Trees$Transformer.transform(Trees.scala:1160)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransforme
rs.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:49)
        at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:1257)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:49)
        at scala.tools.nsc.transform.LiftCode$Codifier.transform(LiftCode.scala:168)
        at scala.reflect.api.Trees$Transformer.transformTemplate(Trees.scala:1234)
        at scala.reflect.api.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:1132)
        at scala.reflect.api.Trees$Transformer$$anonfun$transform$2.apply(Trees.scala:1131)
        at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:1257)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:19)
        at scala.reflect.api.Trees$Transformer.transform(Trees.scala:1130)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:53)
        at scala.tools.nsc.transform.LiftCode$Codifier.transform(LiftCode.scala:168)
        at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:1250)
        at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:1248)
        at scala.collection.immutable.List.loop$1(List.scala:151)
        at scala.collection.immutable.List.mapConserve(List.scala:167)
        at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:1248)
        at scala.reflect.api.Trees$Transformer$$anonfun$transform$1.apply(Trees.scala:1126)
        at scala.reflect.api.Trees$Transformer$$anonfun$transform$1.apply(Trees.scala:1126)
        at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:1257)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:19)
        at scala.reflect.api.Trees$Transformer.transform(Trees.scala:1125)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransforme
rs.scala:49)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:51)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:51)
        at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:1257)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:38)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:31)
        at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:51)
        at scala.tools.nsc.transform.LiftCode$Codifier.transform(LiftCode.scala:168)
        at scala.tools.nsc.ast.Trees$Transformer.transformUnit(Trees.scala:205)
        at scala.tools.nsc.transform.LiftCode$Codifier.scala$tools$nsc$transform$LiftCode$Codifier$$super$transformUnit(LiftCode.scala:130)
        at scala.tools.nsc.transform.LiftCode$Codifier$$anonfun$transformUnit$1.apply$mcV$sp(LiftCode.scala:130)
        at scala.tools.nsc.transform.LiftCode$Codifier$$anonfun$transformUnit$1.apply(LiftCode.scala:130)
        at scala.tools.nsc.transform.LiftCode$Codifier$$anonfun$transformUnit$1.apply(LiftCode.scala:130)
        at scala.reflect.internal.SymbolTable.atPhase(SymbolTable.scala:104)
        at scala.tools.nsc.transform.LiftCode$Codifier.transformUnit(LiftCode.scala:129)
        at scala.tools.nsc.transform.Transform$Phase.apply(Transform.scala:30)
        at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:376)
        at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:346)
        at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:346)
        at scala.collection.Iterator$class.foreach(Iterator.scala:690)
        at scala.collection.AbstractIterator.foreach(Iterator.scala:1115)
        at scala.tools.nsc.Global$GlobalPhase.run(Global.scala:346)
        at scala.tools.nsc.Global$Run.compileUnits(Global.scala:1105)
        at scala.tools.nsc.Global$Run.compileSources(Global.scala:1080)
        at scala.tools.nsc.Global$Run.compile(Global.scala:1198)
        at scala.tools.nsc.Driver.doCompile(Driver.scala:31)
        at scala.tools.nsc.Main$.doCompile(Main.scala:81)
        at scala.tools.nsc.Driver.process(Driver.scala:52)
        at scala.tools.nsc.Driver.main(Driver.scala:65)
        at scala.tools.nsc.Main.main(Main.scala)
{code}
