This is a duplication of scala/bug#3480.
