When compiling the attached files separately or in wrong order, there is a compiler crash. It only occurs with -Yspecialize and separate compilation.

Using Scala compiler version 2.8.0.r21069-b20100305020157
Stack trace:

Exception in thread "main" java.lang.NullPointerException
	at scala.tools.nsc.transform.Mixin$$MixinTransformer.scala$$tools$$nsc$$transform$$Mixin$$MixinTransformer$$$$postTransform(Mixin.scala:952)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer$$$$anonfun$$16.apply(Mixin.scala:1059)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer$$$$anonfun$$16.apply(Mixin.scala:1059)
	at scala.tools.nsc.symtab.SymbolTable.atPhase(SymbolTable.scala:104)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer.transform(Mixin.scala:1059)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformTrees$$1.apply(Trees.scala:822)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformTrees$$1.apply(Trees.scala:822)
	at scala.collection.immutable.List.loop$$1(List.scala:116)
	at scala.collection.immutable.List.mapConserve(List.scala:133)
	at scala.tools.nsc.ast.Trees$$Transformer.transformTrees(Trees.scala:822)
	at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:788)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer.transform(Mixin.scala:1058)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:840)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:838)
	at scala.collection.immutable.List.loop$$1(List.scala:116)
	at scala.collection.immutable.List.mapConserve(List.scala:133)
	at scala.tools.nsc.ast.Trees$$Transformer.transformStats(Trees.scala:838)
	at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:750)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer.transform(Mixin.scala:1058)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$5.apply(Trees.scala:734)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$5.apply(Trees.scala:732)
	at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:848)
	at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:731)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer.transform(Mixin.scala:1058)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:840)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:838)
	at scala.collection.immutable.List.loop$$1(List.scala:116)
	at scala.collection.immutable.List.mapConserve(List.scala:133)
	at scala.tools.nsc.ast.Trees$$Transformer.transformStats(Trees.scala:838)
	at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:748)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer.transform(Mixin.scala:1058)
	at scala.tools.nsc.ast.Trees$$Transformer.transformTemplate(Trees.scala:824)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$2.apply(Trees.scala:718)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$2.apply(Trees.scala:717)
	at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:848)
	at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:716)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer.transform(Mixin.scala:1058)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:840)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transformStats$$1.apply(Trees.scala:838)
	at scala.collection.immutable.List.loop$$1(List.scala:116)
	at scala.collection.immutable.List.mapConserve(List.scala:133)
	at scala.tools.nsc.ast.Trees$$Transformer.transformStats(Trees.scala:838)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$1.apply(Trees.scala:712)
	at scala.tools.nsc.ast.Trees$$Transformer$$$$anonfun$$transform$$1.apply(Trees.scala:712)
	at scala.tools.nsc.ast.Trees$$Transformer.atOwner(Trees.scala:848)
	at scala.tools.nsc.ast.Trees$$Transformer.transform(Trees.scala:711)
	at scala.tools.nsc.transform.Mixin$$MixinTransformer.transform(Mixin.scala:1058)
	at scala.tools.nsc.ast.Trees$$Transformer.transformUnit(Trees.scala:841)
	at scala.tools.nsc.transform.Transform$$Phase.apply(Transform.scala:31)
	at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$applyPhase$$1.apply(Global.scala:270)
	at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$applyPhase$$1.apply(Global.scala:270)
	at scala.tools.nsc.reporters.Reporter.withSource(Reporter.scala:48)
	at scala.tools.nsc.Global$$GlobalPhase.applyPhase(Global.scala:270)
	at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$run$$1.apply(Global.scala:248)
	at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$run$$1.apply(Global.scala:248)
	at scala.collection.Iterator$$class.foreach(Iterator.scala:582)
	at scala.collection.mutable.ListBuffer$$$$anon$$1.foreach(ListBuffer.scala:287)
	at scala.tools.nsc.Global$$GlobalPhase.run(Global.scala:248)
	at scala.tools.nsc.Global$$Run.compileSources(Global.scala:727)
	at scala.tools.nsc.Global$$Run.compile(Global.scala:813)
	at scala.tools.nsc.Main$$.process(Main.scala:109)
	at scala.tools.nsc.Main$$.main(Main.scala:123)
	at scala.tools.nsc.Main.main(Main.scala)
