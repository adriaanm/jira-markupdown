I've attempted to use a very simple event loop, which results in a OOM error on larger(35M) xml documents.  On small documents works fine.  Also, XMLEventReader used to read this document, before 2.8.0.  I tested this with todays snapshot: scala-2.8.0.r18431-b20090803020212


I'll attach the source, I can't attach large xml document.

"main" prio=6 tid=0x002a8800 nid=0xc38 waiting on condition [0x0090f000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0x22ed76e8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(Unknown Source)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$$ConditionObject.await(Unknown Source)
	at java.util.concurrent.LinkedBlockingQueue.take(Unknown Source)
	at scala.xml.pull.ProducerConsumerIterator$$$$anonfun$$fillBuffer$$1.apply(XMLEventReader.scala:134)
	at scala.xml.pull.ProducerConsumerIterator$$class.interruptibly(XMLEventReader.scala:124)
	at scala.xml.pull.XMLEventReader.interruptibly(XMLEventReader.scala:42)
	at scala.xml.pull.ProducerConsumerIterator$$class.fillBuffer(XMLEventReader.scala:134)
	at scala.xml.pull.ProducerConsumerIterator$$class.hasNext(XMLEventReader.scala:146)
	at scala.xml.pull.XMLEventReader.hasNext(XMLEventReader.scala:42)
	at OomError$$.main(OomError.scala:23)
	at OomError.main(OomError.scala)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at scala.util.ScalaClassLoader$$$$anonfun$$run$$1.apply(ClassLoader.scala:54)
	at scala.util.ScalaClassLoader$$class.asContext(ClassLoader.scala:21)
	at scala.util.URLClassLoader.asContext(ClassLoader.scala:58)
	at scala.util.ScalaClassLoader$$class.run(ClassLoader.scala:54)
	at scala.util.URLClassLoader.run(ClassLoader.scala:58)
	at scala.tools.nsc.ObjectRunner$$.run(ObjectRunner.scala:33)
	at scala.tools.nsc.MainGenericRunner$$.main(MainGenericRunner.scala:138)
	at scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala)


"XMLEventReader" prio=6 tid=0x02e9b400 nid=0x5fa0 runnable [0x0301e000]
   java.lang.Thread.State: RUNNABLE
	at sun.nio.cs.MS1252.newDecoder(Unknown Source)
	at scala.io.Codec.decoder(Codec.scala:31)
	at scala.io.Codec.receivedMalformedInput(Codec.scala:37)
	at scala.io.BufferedSource$$$$anon$$2.getc(BufferedSource.scala:66)
	at scala.io.BufferedSource$$$$anon$$2.next(BufferedSource.scala:73)
	at scala.io.BufferedSource$$$$anon$$2.next(BufferedSource.scala:63)
	at scala.io.Source.next(Source.scala:208)
	at scala.xml.parsing.MarkupParser$$class.nextch(MarkupParser.scala:244)
	at scala.xml.pull.XMLEventReader$$Parser.nextch(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.xText(MarkupParser.scala:764)
	at scala.xml.pull.XMLEventReader$$Parser.xText(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content(MarkupParser.scala:542)
	at scala.xml.pull.XMLEventReader$$Parser.content(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.element1(MarkupParser.scala:683)
	at scala.xml.pull.XMLEventReader$$Parser.element1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content1(MarkupParser.scala:482)
	at scala.xml.pull.XMLEventReader$$Parser.content1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content(MarkupParser.scala:506)
	at scala.xml.pull.XMLEventReader$$Parser.content(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.element1(MarkupParser.scala:683)
	at scala.xml.pull.XMLEventReader$$Parser.element1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content1(MarkupParser.scala:482)
	at scala.xml.pull.XMLEventReader$$Parser.content1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content(MarkupParser.scala:506)
	at scala.xml.pull.XMLEventReader$$Parser.content(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.element1(MarkupParser.scala:683)
	at scala.xml.pull.XMLEventReader$$Parser.element1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content1(MarkupParser.scala:482)
	at scala.xml.pull.XMLEventReader$$Parser.content1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content(MarkupParser.scala:506)
	at scala.xml.pull.XMLEventReader$$Parser.content(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.element1(MarkupParser.scala:683)
	at scala.xml.pull.XMLEventReader$$Parser.element1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content1(MarkupParser.scala:482)
	at scala.xml.pull.XMLEventReader$$Parser.content1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content(MarkupParser.scala:506)
	at scala.xml.pull.XMLEventReader$$Parser.content(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.element1(MarkupParser.scala:683)
	at scala.xml.pull.XMLEventReader$$Parser.element1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content1(MarkupParser.scala:482)
	at scala.xml.pull.XMLEventReader$$Parser.content1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content(MarkupParser.scala:506)
	at scala.xml.pull.XMLEventReader$$Parser.content(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.element1(MarkupParser.scala:683)
	at scala.xml.pull.XMLEventReader$$Parser.element1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content1(MarkupParser.scala:482)
	at scala.xml.pull.XMLEventReader$$Parser.content1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content(MarkupParser.scala:506)
	at scala.xml.pull.XMLEventReader$$Parser.content(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.element1(MarkupParser.scala:683)
	at scala.xml.pull.XMLEventReader$$Parser.element1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content1(MarkupParser.scala:482)
	at scala.xml.pull.XMLEventReader$$Parser.content1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content(MarkupParser.scala:506)
	at scala.xml.pull.XMLEventReader$$Parser.content(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.element1(MarkupParser.scala:683)
	at scala.xml.pull.XMLEventReader$$Parser.element1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.content1(MarkupParser.scala:482)
	at scala.xml.pull.XMLEventReader$$Parser.content1(XMLEventReader.scala:73)
	at scala.xml.parsing.MarkupParser$$class.document(MarkupParser.scala:207)
	at scala.xml.pull.XMLEventReader$$Parser.document(XMLEventReader.scala:73)
	at scala.xml.pull.XMLEventReader$$Parser$$$$anonfun$$run$$1.apply(XMLEventReader.scala:100)
	at scala.xml.pull.XMLEventReader$$Parser$$$$anonfun$$run$$1.apply(XMLEventReader.scala:100)
	at scala.xml.pull.ProducerConsumerIterator$$class.interruptibly(XMLEventReader.scala:124)
	at scala.xml.pull.XMLEventReader.interruptibly(XMLEventReader.scala:42)
	at scala.xml.pull.XMLEventReader$$Parser.run(XMLEventReader.scala:100)
	at java.lang.Thread.run(Unknown Source)
