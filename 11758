[~scottcarey] Given that the change has caused a bug, what is the reason we shouldn't just revert the change?  Were any bugs fixed by making that change?  (I grant that in principle it's safer to have at least hd be a val, but if we think we might change the logic that much, we can achieve a similar level of safety by changing the var to a val and making sure that the class still compiles.)
