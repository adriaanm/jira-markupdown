The previous PR had some problems with jenkins, so I have closed it and opened [#4267](https://github.com/scala/scala/pull/4267) in its place.
