Line numbers start at zero, so lineToOffset(4) should throw.
{code}
scala> val offset = file.lineToOffset(4)
offset: Int = 37

scala> file.content.length
res2: Int = 37
{code}
