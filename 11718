It is annoying to work around this in tests as well as in app code, due to separate compilation and cross-compilation.

I think you just get a "\n".  One workaround is:
```scala
import compat.Platform.EOL
s.lines.mkString("", EOL, EOL)
s.lines map (x => f"$x%n") mkString
```

Better is a macro to stripMargin and normalize line endings at a go.
