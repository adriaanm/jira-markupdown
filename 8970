Eugene, creating compilation units out of blue does not seem a lot better to me than having a table of things you generated and you need to put into the right place afterwards.

Also, if {{typedParentTypes}} does not allow you to rewrite trees then maybe you need to refactor that? I don't know all the details but tracking dependencies is an important topic for incremental compilation and we'll need to figure out solid solution for that. I outlined challenges we face here:
https://groups.google.com/d/msg/scala-internals/b95Y-GbXVGA/xOL8LMS2-LMJ

Until we figure out principled solution to incremental compilation and macros I'll ignore the whole issue as I want to support regular Scala code first. Also, I'll revert your work-around for type macros so I have one less thing to worry about when improving incremental compiler. I'll put your as reviewer for that change.
