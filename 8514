One not so ideal way of fixing this is in my branch.

https://github.com/ScrapCodes/scala/tree/si-6502-fix

@som-snytt thoughts ?
