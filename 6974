
Daniel, 

You're right. What I'm suggesting is an incremental improvement. However, without this incremental improvement, {{ClosureElimination}} and {{DeadCodeElimination}} won't even try getting rid of the indirection you describe. Those optimizations can only happen provided the {{apply()}} callsite on the {{foreach}}'s closure argument is inlined to start with. 

