You have a small typo in there. it should be

{noformat}
  def retry[T](times: Int)(f: => Future[T])(implicit executor: ExecutionContext): Future[T] =
    f recoverWith { case _ if times > 0 => retry(times - 1)(f) }
{noformat}
