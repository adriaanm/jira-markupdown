Moving {{reader}}/{{bufReader}} won't work. A {{hasNext}} will still call {{next}} on it, making the first character, if nothing else, unavailable to {{getLines}}. So maybe a {{reset}} is needed, or fixing {{takeWhile}} not to be destructive on {{hasNext}} after all, even though it has worked that way all the way since r19900.
