Fix originally proposed for SI-5024:  https://github.com/adriaanm/scala/commits/ticket-5024, see also SI-4577.
