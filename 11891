This regressed in https://github.com/scala/scala/pull/1564/files

I actually spotted one "non refactoring" amongst that patch when I originally reviewed it. The discussion seems to be lost in the ashes of paulp/scala, but I found this in my email:

{quote}
With the current typer, they're the same thing. In some hypothetical future typer which doesn't mutate everything in place, only whereClauses1 is correct, because those are the trees which were just typed by typedStats. In principle they might not even be the same trees, although I don't think anyone is planning on a change like that.
{quote}

I reverted that change and it doesn't fix the crash. So there must be another needle hidden in that haystack.
