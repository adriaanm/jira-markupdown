(In r24364) Added cycle detection to getParts.  Closes scala/bug#4221, review by prokopec.
