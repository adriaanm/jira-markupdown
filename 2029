This is a duplicate of scala/bug#496.  And, it's more complicated than it probably seems.
