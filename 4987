(In r24457) Applied second patch by asloane. closes scala/bug#3969. no review
