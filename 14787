I was in the middle of porting 2.7 based code to use 2.8 manifests and started observing a compiler crash.  

The problem has been isolated and reproducible to the attached two source files.  They are standalone without other dependencies.  I have not had a chance to whittle it down further.  

Problem is observable with 2.8 Beta RC2 and the most recent nightly 2.8.0-20091129.024453-+

No problem was observed when the ClassManifest was added, it was only when I changed all the old code sites which were detecting and unwrapping the value array from the old BoxedArray stuff that I started to see the problem.

[info] == CHashMap / compile ==
[info]   Source analysis: 2 new/modified, 0 indirectly invalidated, 0 removed.
[info] Compiling main sources...
java.lang.NullPointerException
	at scala.tools.nsc.backend.icode.TypeKinds$$class.toTypeKind(TypeKinds.scala:471)
	at scala.tools.nsc.backend.icode.ICodes.toTypeKind(ICodes.scala:27)
	at scala.tools.nsc.backend.ScalaPrimitives.getPrimitive(ScalaPrimitives.scala:592)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.genPrimitiveOp(GenICode.scala:415)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:714)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:684)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:484)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:850)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:850)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.genLoadIf(GenICode.scala:362)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:511)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:850)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:850)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:850)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:850)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.genLoadIf(GenICode.scala:362)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:511)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:850)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.genLoadIf(GenICode.scala:362)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:511)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.scala$$tools$$nsc$$backend$$icode$$GenICode$$ICodePhase$$$$genLoad(GenICode.scala:850)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.gen(GenICode.scala:130)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase$$$$anonfun$$gen$$1.apply(GenICode.scala:87)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase$$$$anonfun$$gen$$1.apply(GenICode.scala:87)
	at scala.collection.LinearSeqLike$$class.foreach(LinearSeqLike.scala:88)
	at scala.collection.immutable.List.foreach(List.scala:29)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.gen(GenICode.scala:87)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.gen(GenICode.scala:152)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.gen(GenICode.scala:106)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase$$$$anonfun$$gen$$1.apply(GenICode.scala:87)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase$$$$anonfun$$gen$$1.apply(GenICode.scala:87)
	at scala.collection.LinearSeqLike$$class.foreach(LinearSeqLike.scala:88)
	at scala.collection.immutable.List.foreach(List.scala:29)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.gen(GenICode.scala:87)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.gen(GenICode.scala:97)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.gen(GenICode.scala:83)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.apply(GenICode.scala:79)
	at scala.tools.nsc.Global$$GlobalPhase.applyPhase(Global.scala:306)
	at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$run$$1.apply(Global.scala:284)
	at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$run$$1.apply(Global.scala:284)
	at scala.collection.Iterator$$class.foreach(Iterator.scala:587)
	at scala.collection.mutable.ListBuffer$$$$anon$$1.foreach(ListBuffer.scala:285)
	at scala.tools.nsc.Global$$GlobalPhase.run(Global.scala:284)
	at scala.tools.nsc.backend.icode.GenICode$$ICodePhase.run(GenICode.scala:72)
	at scala.tools.nsc.Global$$Run.compileSources(Global.scala:773)
	at scala.tools.nsc.Global$$Run.compile(Global.scala:863)
	at xsbt.CompilerInterface.run(CompilerInterface.scala:80)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at xsbt.AnalyzingCompiler.call(AnalyzingCompiler.scala:61)
	at xsbt.AnalyzingCompiler.apply(AnalyzingCompiler.scala:19)
	at sbt.Compile.processScala(Compile.scala:77)
	at sbt.CompilerCore$$$$anonfun$$1.apply(Compile.scala:28)
	at sbt.CompilerCore$$$$anonfun$$1.apply(Compile.scala:28)
	at sbt.CompilerCore$$$$anonfun$$process$$1$$1.apply(Compile.scala:23)
	at sbt.CompilerCore$$$$anonfun$$process$$1$$1.apply(Compile.scala:23)
	at sbt.CompilerCore$$$$anonfun$$doCompile$$3.apply(Compile.scala:46)
	at sbt.CompilerCore$$$$anonfun$$doCompile$$3.apply(Compile.scala:43)
	at scala.Option.orElse(Option.scala:102)
	at sbt.CompilerCore.doCompile(Compile.scala:42)
	at sbt.CompilerCore.apply(Compile.scala:30)
	at sbt.AbstractCompileConditional.run$$1(Conditional.scala:329)
	at sbt.AbstractCompileConditional$$$$anonfun$$3.apply(Conditional.scala:332)
	at sbt.AbstractCompileConditional$$$$anonfun$$3.apply(Conditional.scala:332)
	at sbt.classfile.Analyze$$.apply(Analyze.scala:84)
	at sbt.AbstractCompileConditional.execute(Conditional.scala:332)
	at sbt.Conditional$$class.run(Conditional.scala:43)
	at sbt.AbstractCompileConditional.run(Conditional.scala:225)
	at sbt.BasicScalaProject.sbt$$BasicScalaProject$$$$doCompile(DefaultProject.scala:229)
	at sbt.BasicScalaProject$$$$anonfun$$compileAction$$1.apply(DefaultProject.scala:243)
	at sbt.BasicScalaProject$$$$anonfun$$compileAction$$1.apply(DefaultProject.scala:243)
	at sbt.TaskManager$$Task.invoke(TaskManager.scala:62)
	at sbt.impl.RunTask.doRun$$1(RunTask.scala:75)
	at sbt.impl.RunTask.runTask(RunTask.scala:83)
	at sbt.impl.RunTask.sbt$$impl$$RunTask$$$$runIfNotRoot(RunTask.scala:60)
	at sbt.impl.RunTask$$$$anonfun$$runTasksExceptRoot$$2.apply(RunTask.scala:48)
	at sbt.impl.RunTask$$$$anonfun$$runTasksExceptRoot$$2.apply(RunTask.scala:48)
	at sbt.Distributor$$Run$$Worker$$$$anonfun$$2.apply(ParallelRunner.scala:130)
	at sbt.Distributor$$Run$$Worker$$$$anonfun$$2.apply(ParallelRunner.scala:130)
	at sbt.Control$$.trapUnit(Control.scala:19)
	at sbt.Distributor$$Run$$Worker.run(ParallelRunner.scala:130)
