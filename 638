see also scala/bug#3392 for a simpler test case
