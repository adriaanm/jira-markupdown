Here's another encoding which works:

{code}
def f[R](a: AA[R]): Option[a.R] = Some(1).map(_ => a.r)
{code}
