This has some overlap with scala/bug#8685, but that is a feature request and this is a bug report.
