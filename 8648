I think this will be fixed (somewhat indirectly) by https://github.com/scala/scala/pull/1801 . It was possible for erroneous annotations to cause typed to return a tree with a null type and without marking the tree erroneous, invariably leading to failure at some later and most likely surprising point.
