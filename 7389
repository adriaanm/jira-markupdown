See also scala/bug#1336, to which this is related.  The unnecessary call to filter which it injects leads to Nothing being inferred for the type parameter to filter, which leads to typing failure.
