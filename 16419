When I pass a {{-Jfoo}} argument to the {{scala}} command, I would expect {{foo}} to be passed to the java command, and for {{-Jfoo}} to not be included in the list of arguments passed to my main function, as they are explicitly for the Java runtime and not my program. However, any {{-J}} arguments are included.

This behaviour is due to https://lampsvn.epfl.ch/trac/scala/browser/scala/trunk/src/compiler/scala/tools/ant/templates/tool-unix.tmpl#L129.

The problem really is that when you run a command such as

{{scala -Jfoo Bar}}

the Java command that is finally run is

{{java ... scala.tools.nsc.MainGenericRunner -Jfoo Bar}}

This means that {{scala.tools.nsc.MainGenericRunner}} tries to run the class {{-Jfoo}} with the argument {{Bar}}, and obviously fails to find the class.

Also, {{-J}} isn't documented in the manual page. The related option {{-D}} is documented.

This is possibly related to SI-4907.
