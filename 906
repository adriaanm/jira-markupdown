Well spotted! The source of the problem mentioned in this ticket was the same as in scala/bug#1624. The fix in r16854/r16855 simplified the logic, and solved this ticket as well (the final 'E' of the supplied example is now printed as expected).
