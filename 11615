Duplicate of scala/bug#7743. Unfortunately this is more a limitation than a bug: local type inference is working as specified but needs more programmer-provided type annotations when you have an compound expression like this one.
