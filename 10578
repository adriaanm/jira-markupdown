Looks like the fix is less risky than I thought. One of my attempts uncovered scala/bug#8230.
