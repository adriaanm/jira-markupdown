This is a duplicate of scala/bug#3119.  (And I've fixed it, and if possible will check in tomorrow.)
