Duplicated of scala/bug#7743. You need to add a type hint along the way due to the way that local type inference works in Scala.
