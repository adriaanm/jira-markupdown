Hmm, I bet this is related to Scala's issues with the mintty Cygwin interface, described here:

http://groups.google.com/group/mintty-discuss/browse_thread/thread/00f259659a1b7b28?pli=1

More information here:

http://blog.andrewbeacock.com/2009/10/how-to-get-scala-working-with-rxvt.html

In Scala's bugtracker, this is ticket 2097:

http://lampsvn.epfl.ch/trac/scala/ticket/2097

When I hit my original problem, I was running this slightly modified Cygwin.bat to make emacs happy:
```scala
@echo off

C:
chdir C:\cygwin\bin

set CYGWIN=tty notitle glob
bash --login -i
```

If I comment out the `set` line, the problem goes away.

Or, if I leave the `set` line in, I can apply the fix given in the links above, i.e. add this to the last line in bin/scala:
```scala
-Djline.terminal=jline.UnixTerminal
```

Either workaround gives me 3, not 12.

Sadly, both approaches cause interactive scala to start with this unsightly stack trace (then continue unfazed):
```scala
$$ scala
java.io.IOException: Cannot run program "sh": CreateProcess error=2, The system cannot find the file specified
        at java.lang.ProcessBuilder.start(Unknown Source)
        at java.lang.Runtime.exec(Unknown Source)
        at java.lang.Runtime.exec(Unknown Source)
        at jline.UnixTerminal.exec(UnixTerminal.java:300)
        at jline.UnixTerminal.exec(UnixTerminal.java:285)
        at jline.UnixTerminal.stty(UnixTerminal.java:276)
        at jline.UnixTerminal.initializeTerminal(UnixTerminal.java:80)
        at jline.Terminal.setupTerminal(Terminal.java:75)
        at jline.Terminal.getTerminal(Terminal.java:26)
        at jline.ConsoleReader.<init>(ConsoleReader.java:191)
        at jline.ConsoleReader.<init>(ConsoleReader.java:186)
        at jline.ConsoleReader.<init>(ConsoleReader.java:174)
        at scala.tools.nsc.interpreter.JLineReader.<init>(JLineReader.scala:20)
        at scala.tools.nsc.interpreter.InteractiveReader$$.createDefault(InteractiveReader.scala:48)
        at scala.tools.nsc.InterpreterLoop.main(InterpreterLoop.scala:543)
        at scala.tools.nsc.MainGenericRunner$$.main(MainGenericRunner.scala:72)
        at scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
        at java.lang.ProcessImpl.create(Native Method)
        at java.lang.ProcessImpl.<init>(Unknown Source)
        at java.lang.ProcessImpl.start(Unknown Source)
        ... 17 more
Welcome to Scala ... [snip]
```

Oh, by the way:
```scala
$$ which sh
/usr/bin/sh
```

I take the sh stack trace to be incidental to the main problem here, which is that the tty library scala uses has trouble on Cygwin. But the stack trace makes the workaround rather alarming.
