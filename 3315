A smaller version of the problem:

{code}
case class Const {
}    // missing '{' assumed here

class Var
{

{code}

It's actually a remarkably specific bug. Just take a look at the variations below, each of which is competently handled by the missing brace department.

{code}
case class Const
{
}

class Var
{
     // missing '{' assumed here
{code}

{code}
class Const {
}

class Var
{
     // missing '{' assumed here
{code}

{code}
object Const {
}

class Var
{
     // missing '{' assumed here
{code}

{code}
final case class Const {
}

class Var
{
     // missing '{' assumed here
{code}

{code}
@foo case class Const {
}

class Var
{
     // missing '{' assumed here
{code}

{code}
case
class Const {
}

class Var
{
     // missing '{' assumed here
{code}

{code}
case class
Const {
}

class Var
{
     // missing '{' assumed here
{code}
