Whenever I open the attached code I get minimal syntax highlighting and an error message about a bug in the syntax highlighter. (No, it's not great code: I'm still learning Scala & its parser combinators.) Other files work just fine.

I'm running *Eclipse 3.3.1.1 (M20071023-1652)* with the *2.7.0.14001-RC2_0 Scala plugin*.
----
Here is the full stack trace:

{code}
!ENTRY ch.epfl.lamp.sdt.core 4 4 2008-02-28 11:50:00.084
!MESSAGE No message
!STACK 0
java.lang.Error
	at scala.tools.nsc.models.SemanticTokens$$Process$$TokenList.put(SemanticTokens.scala:621)
	at scala.tools.nsc.models.SemanticTokens$$Process$$visitor.update(SemanticTokens.scala:211)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:64)
	at scala.tools.nsc.symtab.SymbolWalker$$class.fs$$1(SymbolWalker.scala:28)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:161)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:139)
	at scala.tools.nsc.symtab.SymbolWalker$$class.fs$$1(SymbolWalker.scala:28)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:132)
	at scala.tools.nsc.symtab.SymbolWalker$$class.fs$$1(SymbolWalker.scala:28)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:132)
	at scala.tools.nsc.symtab.SymbolWalker$$class.fs$$1(SymbolWalker.scala:28)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:137)
	at scala.tools.nsc.symtab.SymbolWalker$$class.fs$$1(SymbolWalker.scala:28)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:137)
	at scala.tools.nsc.symtab.SymbolWalker$$class.fs$$1(SymbolWalker.scala:28)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:137)
	at scala.tools.nsc.symtab.SymbolWalker$$class.fs$$1(SymbolWalker.scala:28)
	at scala.tools.nsc.symtab.SymbolWalker$$class.f$$1(SymbolWalker.scala:137)
	at scala.tools.nsc.symtab.SymbolWalker$$class.walk(SymbolWalker.scala:218)
	at scala.tools.nsc.models.SemanticTokens$$walker$$.walk(SemanticTokens.scala:20)
	at scala.tools.nsc.models.SemanticTokens$$Process.<init>(SemanticTokens.scala:214)
	at scala.tools.nsc.models.SemanticTokens.Process(SemanticTokens.scala:134)
	at ch.epfl.lamp.sdt.build.ScalaCompilerManager$$SemanticCompiler.tokensFor(ScalaCompilerManager.java:494)
	at ch.epfl.lamp.sdt.core.ScalaProject.refreshTokens(ScalaProject.java:148)
	at ch.epfl.lamp.sdt.ui.actions.HighlightAction.run(HighlightAction.java:93)
	at ch.epfl.lamp.sdt.ui.actions.HighlightAction.run(HighlightAction.java:79)
	at ch.epfl.lamp.sdt.ui.actions.HighlightAction$$1.run(HighlightAction.java:63)
	at ch.epfl.lamp.sdt.ui.actions.HighlightAction.run(HighlightAction.java:67)
	at ch.epfl.lamp.sdt.ui.scalaeditor.ScalaEditor$$2.focusGained(ScalaEditor.java:228)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:132)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:962)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:943)
	at org.eclipse.swt.widgets.Control.sendFocusEvent(Control.java:2352)
	at org.eclipse.swt.widgets.Widget.wmSetFocus(Widget.java:2176)
	at org.eclipse.swt.widgets.Control.WM_SETFOCUS(Control.java:4282)
	at org.eclipse.swt.widgets.Canvas.WM_SETFOCUS(Canvas.java:343)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3738)
	at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:291)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:4351)
	at org.eclipse.swt.internal.win32.OS.SetFocus(Native Method)
	at org.eclipse.swt.widgets.Control.forceFocus(Control.java:963)
	at org.eclipse.swt.widgets.Control.setSavedFocus(Control.java:2966)
	at org.eclipse.swt.widgets.Decorations.restoreFocus(Decorations.java:803)
	at org.eclipse.swt.widgets.Decorations.WM_ACTIVATE(Decorations.java:1595)
	at org.eclipse.swt.widgets.Shell.WM_ACTIVATE(Shell.java:1833)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3670)
	at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:291)
	at org.eclipse.swt.widgets.Decorations.windowProc(Decorations.java:1554)
	at org.eclipse.swt.widgets.Shell.windowProc(Shell.java:1753)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:4351)
	at org.eclipse.swt.internal.win32.OS.DestroyWindow(Native Method)
	at org.eclipse.swt.widgets.Control.destroyWidget(Control.java:652)
	at org.eclipse.swt.widgets.Shell.destroyWidget(Shell.java:636)
	at org.eclipse.swt.widgets.Widget.release(Widget.java:750)
	at org.eclipse.swt.widgets.Widget.dispose(Widget.java:410)
	at org.eclipse.swt.widgets.Decorations.dispose(Decorations.java:441)
	at org.eclipse.swt.widgets.Shell.dispose(Shell.java:653)
	at org.eclipse.jface.window.Window.close(Window.java:330)
	at org.eclipse.jface.dialogs.Dialog.close(Dialog.java:971)
	at org.eclipse.jface.dialogs.ErrorDialog.close(ErrorDialog.java:601)
	at org.eclipse.jface.dialogs.Dialog.okPressed(Dialog.java:932)
	at org.eclipse.jface.dialogs.Dialog.buttonPressed(Dialog.java:464)
	at org.eclipse.jface.dialogs.ErrorDialog.buttonPressed(ErrorDialog.java:155)
	at org.eclipse.jface.dialogs.Dialog$$2.widgetSelected(Dialog.java:616)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:227)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)
	at org.eclipse.jface.window.Window.runEventLoop(Window.java:820)
	at org.eclipse.jface.window.Window.open(Window.java:796)
	at org.eclipse.jface.dialogs.ErrorDialog.open(ErrorDialog.java:333)
	at org.eclipse.jface.dialogs.ErrorDialog.openError(ErrorDialog.java:397)
	at org.eclipse.jface.dialogs.ErrorDialog.openError(ErrorDialog.java:362)
	at ch.epfl.lamp.sdt.ui.ScalaUIPlugin$$1.run(ScalaUIPlugin.java:281)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:152)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:118)
	at org.eclipse.swt.widgets.Display.syncExec(Display.java:4097)
	at ch.epfl.lamp.sdt.ui.ScalaUIPlugin.report(ScalaUIPlugin.java:275)
	at ch.epfl.lamp.sdt.core.ScalaCorePlugin.log(ScalaCorePlugin.java:41)
	at ch.epfl.lamp.sdt.core.ScalaCorePlugin.logError(ScalaCorePlugin.java:56)
	at ch.epfl.lamp.sdt.core.ScalaCorePlugin.logError(ScalaCorePlugin.java:45)
	at ch.epfl.lamp.sdt.build.ScalaCompilerManager$$SemanticCompiler.tokensFor(ScalaCompilerManager.java:508)
	at ch.epfl.lamp.sdt.core.ScalaProject.refreshTokens(ScalaProject.java:148)
	at ch.epfl.lamp.sdt.ui.actions.HighlightAction.run(HighlightAction.java:93)
	at ch.epfl.lamp.sdt.ui.actions.HighlightAction.run(HighlightAction.java:79)
	at ch.epfl.lamp.sdt.ui.actions.HighlightAction$$1.run(HighlightAction.java:63)
	at ch.epfl.lamp.sdt.ui.actions.HighlightAction.run(HighlightAction.java:67)
	at ch.epfl.lamp.sdt.ui.scalaeditor.ScalaEditor$$2.focusGained(ScalaEditor.java:228)
	at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:132)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:962)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:943)
	at org.eclipse.swt.widgets.Control.sendFocusEvent(Control.java:2352)
	at org.eclipse.swt.widgets.Widget.wmSetFocus(Widget.java:2176)
	at org.eclipse.swt.widgets.Control.WM_SETFOCUS(Control.java:4282)
	at org.eclipse.swt.widgets.Canvas.WM_SETFOCUS(Canvas.java:343)
	at org.eclipse.swt.widgets.Control.windowProc(Control.java:3738)
	at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:291)
	at org.eclipse.swt.widgets.Display.windowProc(Display.java:4351)
	at org.eclipse.swt.internal.win32.OS.SetFocus(Native Method)
	at org.eclipse.swt.widgets.Control.forceFocus(Control.java:963)
	at org.eclipse.swt.widgets.Control.setFocus(Control.java:2727)
	at org.eclipse.swt.widgets.Composite.setFocus(Composite.java:816)
	at org.eclipse.ui.texteditor.AbstractTextEditor.setFocus(AbstractTextEditor.java:5794)
	at org.eclipse.ui.internal.PartPane.setFocus(PartPane.java:318)
	at org.eclipse.ui.internal.EditorPane.setFocus(EditorPane.java:127)
	at org.eclipse.ui.internal.WorkbenchPage$$3.run(WorkbenchPage.java:623)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.core.runtime.Platform.run(Platform.java:857)
	at org.eclipse.ui.internal.WorkbenchPage.activatePart(WorkbenchPage.java:618)
	at org.eclipse.ui.internal.WorkbenchPage.setActivePart(WorkbenchPage.java:3398)
	at org.eclipse.ui.internal.WorkbenchPage.activate(WorkbenchPage.java:611)
	at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2748)
	at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2651)
	at org.eclipse.ui.internal.WorkbenchPage.access$$13(WorkbenchPage.java:2643)
	at org.eclipse.ui.internal.WorkbenchPage$$10.run(WorkbenchPage.java:2595)
	at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:67)
	at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2590)
	at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2574)
	at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2565)
	at org.eclipse.ui.ide.IDE.openEditor(IDE.java:644)
	at org.eclipse.ui.ide.IDE.openEditor(IDE.java:603)
	at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:286)
	at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:139)
	at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:194)
	at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:175)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:268)
	at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:244)
	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:316)
	at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$$5.open(PackageExplorerPart.java:613)
	at org.eclipse.jface.viewers.StructuredViewer$$2.run(StructuredViewer.java:820)
	at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:37)
	at org.eclipse.core.runtime.Platform.run(Platform.java:857)
	at org.eclipse.ui.internal.JFaceUtil$$1.run(JFaceUtil.java:46)
	at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:199)
	at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:818)
	at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1079)
	at org.eclipse.jface.viewers.StructuredViewer$$6.handleOpen(StructuredViewer.java:1183)
	at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:263)
	at org.eclipse.jface.util.OpenStrategy.access$$2(OpenStrategy.java:257)
	at org.eclipse.jface.util.OpenStrategy$$1.handleEvent(OpenStrategy.java:297)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:66)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:938)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3682)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3293)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2389)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2353)
	at org.eclipse.ui.internal.Workbench.access$$4(Workbench.java:2219)
	at org.eclipse.ui.internal.Workbench$$4.run(Workbench.java:466)
	at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:289)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:461)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
	at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:106)
	at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:169)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:106)
	at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:76)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:363)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:508)
	at org.eclipse.equinox.launcher.Main.basicRun(Main.java:447)
	at org.eclipse.equinox.launcher.Main.run(Main.java:1173)
{code}
