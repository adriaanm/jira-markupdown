This appears to be a common problem.

Others have implemented things like a "ClassloaderAwareObjectInputStream".   Essentially, this appears to be a flaw with ObjectInputStream's design.

Also see the results when searching google for 'latestUserDefinedLoader'.

The common solution is for users to extend ObjectInputStream and override resolveClass.  This turns out to be non-trivial as well, see bugs in other libraries such as: https://github.com/jsampson/prevayler/issues/10
