The fix in https://github.com/scala/scala/pull/4026 only works under separate compilation, because annotations are skipped by the Java parser. We have an open issue for this: https://issues.scala-lang.org/browse/SI-8928, so this one can be closed.

{code}
@Retention(value=SOURCE) // not parsed by the Java parser
@interface SAnnotation {}
{code}

Tests updated accordingly in https://github.com/scala/scala/pull/5606.
