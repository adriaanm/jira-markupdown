This looks a lot like ticket scala/bug#3772.
