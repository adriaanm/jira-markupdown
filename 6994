Additional test cases in SI-9469 also seem to be fixed by my patch above, so I'm merging these tickets.
