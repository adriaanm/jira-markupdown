This is the original code that triggered the bug (just in case the above minimization isn't entirely equivalent):

{code}
abstract class Buffer {
  def getByte(): Byte 
  def getShort(): Short
  def getInt(): Int  
  def getLong(): Long 

  def getEncoded[@specialized(Byte, Short, Int, Long) T](): T = {
    val id = getByte()
    id match {
      case 0 => getByte().asInstanceOf[T]
      case 1 => getShort().asInstanceOf[T]
      case 2 => getInt().asInstanceOf[T]
      case 3 => getLong().asInstanceOf[T]
    }
  }
}
{code}
