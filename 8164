The cause of this bug lies not so much in {{Inliner}} but in {{ICodeReader}}, which doesn't map bytecode-level exception handlers (in our case, that for {{Success.flatMap}}) to the resulting {{IMethod}}. Another bug in this category appears to be SI-6157.

The short term solution consists in preventing inlining of callees containing EHs. Doing so also avoids class file format errors where a try expression is inlined at a non-empty-stack program point (same thing that "lift try" in UnCurry avoids).

For reference, this is where {{ICodeReader}} meets bytecode-level EHs:
{noformat}
    while (i < exceptionEntries) {
      // skip start end PC
      in.skip(4)
      // read the handler PC
      code.jmpTargets += in.nextChar
      // skip the exception type
      in.skip(2)
      i += 1
    }
    skipAttributes()
{noformat}

