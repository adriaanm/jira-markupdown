the code can be simplified to:

{code}
trait X
case object a extends X
case object b extends X

object Test {
   def foo(x: X) = x match { 
      case a => 1
      case b => 2  // spurious unreachable code error
   }
}
{code}
