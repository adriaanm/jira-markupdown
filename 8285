Back-applied patch to 2.10.x.

https://github.com/scala/scala/pull/1277

Learned about git format-patch and git am.  Was that the most appropriate workflow?

A vermicious knid ate my patch file.
