Easier version causing the same error:
{code}
val x = new { def copy(a : this.type) = a };
x.copy(x)
{code}

Test is in test/pending/pos/t1004.scala.
