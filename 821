Easier version causing the same error:
```scala
val x = new { def copy(a : this.type) = a };
x.copy(x)
```

Test is in test/pending/pos/t1004.scala.
