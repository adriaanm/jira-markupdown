I've paired back the example to what fails. The real error is that case classes redefined within a for comprehension cause a crash, if there are 2 of them and they depend on each other.
```scala

object Main {
  def main(args : Array[String]) {
    val xs = for (i <- List(1,2,3)) yield {
      case class Bar()
      case class Foo(b : Bar)
      Foo(Bar())
    }
    println("fail")
  }
}
```
