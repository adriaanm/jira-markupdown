The initial example is now correctly rejected by the compiler on trunk:-
{code}
error: contravariant type S occurs in covariant position in type =>
 java.lang.Object{def x: S} of value f
        val f  = new { val x = y }
            ^
{code}

Unfortunately, the "Similar example" still compiles (and fails at runtime).
