Sigh, I guess this is scala/bug#8522. I don't know why I bother.
