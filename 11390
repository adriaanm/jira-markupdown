This is indeed a problem, which we want to fix. Here's an open issue about that: https://issues.scala-lang.org/browse/SI-7993.

Unfortunately, short of disabling macro expansion at doctime, I don't think there's an easy workaround. The best I can imagine here at the moment is to cast to Global and use the internal APIs to see through DocDefs.
