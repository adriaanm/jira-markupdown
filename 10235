Java8 has a version of this, with a new method in the ConcurrentMap:
https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html#computeIfAbsent-K-java.util.function.Function-

Which also does *not* guarantee that the mapping function is called only once under racy conditions
