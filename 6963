Because my last comments are so confused, I will restate the problem:

C$mcI$sp doesn't have an implmentation of m$mIcI$sp, so it inherits C's implmentation, which uses boxing on T and W.

The basic problem seems to be that needsSpecialization doesn't ever get called with an env containing T and W: the envs are either Map(T -> Int) or Map(W -> Int) but not both. This means that all needsSpecialization calls involving m$mIcI$sp return false.

I think (hope?) if we asked about the env Map(T -> Int, W -> Int) it would return true.
