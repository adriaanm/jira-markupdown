This bug still exists in r19928 but it seems to me like yet another manifestation of SI-2443. plocinic said in SI-2581 that "In resident mode symbols of top level classes don't get removed which is why you get this weird behaviour even if A and B are in the same file" so I believe that the same applies here.
