The code duplication described in this ticket (applying to the old optimizer) is nowadays avoided in {{Range.foreach}}, because it was refactored to avoid that quirk of the old optimizer. However the problem remains in general. By design, the new optimizer http://magarciaepfl.github.io/scala/ doesn't duplicate more than once a closure body when inlining a closure.
