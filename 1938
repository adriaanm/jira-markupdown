It isn't compiler knowledge that is necessary so much as a great deal
of time and patience. The algorithm by which names are derived requires
comprehensive modification. A single character, $, is used to encode dozens
of different pieces of information. That character is also used by java.
There is no way to correctly handle all competing uses while still only
using $, especially given the hardcoded assumptions in java.lang.Class
which cause the getSimpleName issue. The workable answer in my opinion is
to reserve characters from a larger set and start using meaningfully: see
http://blogs.oracle.com/jrose/entry/symbolic_freedom_in_the_vm . There is much
which would have to be kept working and little documentation about what it is.
That however is the task.
