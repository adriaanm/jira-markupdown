```scala
    val file = new BatchSourceFile(
      "bug.scala",
      """package com.example
        |object Test {
        |}
        |
        |""".stripMargin
    )

    val offset = file.lineToOffset(4)
    file.offsetToLine(offset)
```

Fails with:
```
java.lang.ArrayIndexOutOfBoundsException: 6
at scala.reflect.internal.util.BatchSourceFile.findLine$1(SourceFile.scala:178)
at scala.reflect.internal.util.BatchSourceFile.offsetToLine(SourceFile.scala:181)
```
