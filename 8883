Seems like scala/bug#6076 is cheating around the same issue with https://github.com/scala/scala/pull/928/files.

A workaround is to set the position of the resulting tree of the macro to an arbitrary range position:
```scala
val res = // original result of the macro
c.Expr[String](atPos(somePos)(res.tree))
```
