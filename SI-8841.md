The project [https://github.com/yanns/scalatest-compile-error] produces the following error:
```
Detected sbt version 0.13.5
[info] Loading global plugins from /home/simon/.sbt/0.13/plugins
[info] Loading project definition from /home/simon/projects/scala/scalatest-compile-error/project
[info] Set current project to scalatest-compile-error (in build file:/home/simon/projects/scala/scalatest-compile-error/)
[info] Compiling 1 Scala source to /home/simon/projects/scala/scalatest-compile-error/target/scala-2.11/test-classes...
TREE: Some(payment)
TRANSFORM: null
TREE: Invoice.apply(Some(payment), Invoice.apply$default$1)
TRANSFORM: /home/simon/projects/scala/scalatest-compile-error/src/test/scala/payment/InvoiceSpec.scala
TREE: val <invoice: error>: <error> = Invoice.apply(Some(payment), Invoice.apply$default$1)
TREE: {
  val payment: payment.Payment = Payment.apply(scala.Some.apply[String]("payer"));
  val <invoice: error>: <error> = Invoice.apply(Some(payment), Invoice.apply$default$1);
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment").in(<invoice: error>.<payment: error>.<should: error>(be(scala.Symbol("defined"))));
  val <zePayer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer").in(<zePayer: error>.<value: error>.<shouldEqual: error>("payer"));
  val <payer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer2").in(<payer: error>.<value: error>.<shouldEqual: error>("payer"))
}
TRANSFORM: null
TREE: InvoiceSpec.this.convertToStringShouldWrapper("used with payment").should({
  val payment: payment.Payment = Payment.apply(scala.Some.apply[String]("payer"));
  val <invoice: error>: <error> = Invoice.apply(Some(payment), Invoice.apply$default$1);
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment").in(<invoice: error>.<payment: error>.<should: error>(be(scala.Symbol("defined"))));
  val <zePayer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer").in(<zePayer: error>.<value: error>.<shouldEqual: error>("payer"));
  val <payer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer2").in(<payer: error>.<value: error>.<shouldEqual: error>("payer"))
})
TRANSFORM: null
TREE: InvoiceSpec.this.convertToStringShouldWrapper("used with payment").should({
  val payment: payment.Payment = Payment.apply(scala.Some.apply[String]("payer"));
  val <invoice: error>: <error> = Invoice.apply(Some(payment), Invoice.apply$default$1);
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment").in(<invoice: error>.<payment: error>.<should: error>(be(scala.Symbol("defined"))));
  val <zePayer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer").in(<zePayer: error>.<value: error>.<shouldEqual: error>("payer"));
  val <payer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer2").in(<payer: error>.<value: error>.<shouldEqual: error>("payer"))
})(InvoiceSpec.this.subjectRegistrationFunction)
TRANSFORM: null
TREE: InvoiceSpec.this.convertToWordSpecStringWrapper("The model with invoice").when(InvoiceSpec.this.convertToStringShouldWrapper("used with payment").should({
  val payment: payment.Payment = Payment.apply(scala.Some.apply[String]("payer"));
  val <invoice: error>: <error> = Invoice.apply(Some(payment), Invoice.apply$default$1);
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment").in(<invoice: error>.<payment: error>.<should: error>(be(scala.Symbol("defined"))));
  val <zePayer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer").in(<zePayer: error>.<value: error>.<shouldEqual: error>("payer"));
  val <payer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
  InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer2").in(<payer: error>.<value: error>.<shouldEqual: error>("payer"))
})(InvoiceSpec.this.subjectRegistrationFunction))
TRANSFORM: /home/simon/projects/scala/scalatest-compile-error/src/test/scala/payment/InvoiceSpec.scala
TREE: org.scalatest.WordSpec with org.scalatest.Matchers with org.scalatest.OptionValues {
  def <init>(): payment.InvoiceSpec = {
    InvoiceSpec.super.<init>();
    ()
  };
  InvoiceSpec.this.convertToWordSpecStringWrapper("The model with invoice").when(InvoiceSpec.this.convertToStringShouldWrapper("used with payment").should({
    val payment: payment.Payment = Payment.apply(scala.Some.apply[String]("payer"));
    val <invoice: error>: <error> = Invoice.apply(Some(payment), Invoice.apply$default$1);
    InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment").in(<invoice: error>.<payment: error>.<should: error>(be(scala.Symbol("defined"))));
    val <zePayer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
    InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer").in(<zePayer: error>.<value: error>.<shouldEqual: error>("payer"));
    val <payer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
    InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer2").in(<payer: error>.<value: error>.<shouldEqual: error>("payer"))
  })(InvoiceSpec.this.subjectRegistrationFunction))
}
TRANSFORM: /home/simon/projects/scala/scalatest-compile-error/src/test/scala/payment/InvoiceSpec.scala
TREE: class InvoiceSpec extends org.scalatest.WordSpec with org.scalatest.Matchers with org.scalatest.OptionValues {
  def <init>(): payment.InvoiceSpec = {
    InvoiceSpec.super.<init>();
    ()
  };
  InvoiceSpec.this.convertToWordSpecStringWrapper("The model with invoice").when(InvoiceSpec.this.convertToStringShouldWrapper("used with payment").should({
    val payment: payment.Payment = Payment.apply(scala.Some.apply[String]("payer"));
    val <invoice: error>: <error> = Invoice.apply(Some(payment), Invoice.apply$default$1);
    InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment").in(<invoice: error>.<payment: error>.<should: error>(be(scala.Symbol("defined"))));
    val <zePayer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
    InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer").in(<zePayer: error>.<value: error>.<shouldEqual: error>("payer"));
    val <payer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
    InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer2").in(<payer: error>.<value: error>.<shouldEqual: error>("payer"))
  })(InvoiceSpec.this.subjectRegistrationFunction))
}
TRANSFORM: null
TREE: package payment {
  import org.scalatest.{OptionValues, Matchers, WordSpec};
  class InvoiceSpec extends org.scalatest.WordSpec with org.scalatest.Matchers with org.scalatest.OptionValues {
    def <init>(): payment.InvoiceSpec = {
      InvoiceSpec.super.<init>();
      ()
    };
    InvoiceSpec.this.convertToWordSpecStringWrapper("The model with invoice").when(InvoiceSpec.this.convertToStringShouldWrapper("used with payment").should({
      val payment: payment.Payment = Payment.apply(scala.Some.apply[String]("payer"));
      val <invoice: error>: <error> = Invoice.apply(Some(payment), Invoice.apply$default$1);
      InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment").in(<invoice: error>.<payment: error>.<should: error>(be(scala.Symbol("defined"))));
      val <zePayer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
      InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer").in(<zePayer: error>.<value: error>.<shouldEqual: error>("payer"));
      val <payer: error>: <error> = <invoice: error>.<payment: error>.<value: error>.<payer: error>;
      InvoiceSpec.this.convertToWordSpecStringWrapper("contains the field payment.payer2").in(<payer: error>.<value: error>.<shouldEqual: error>("payer"))
    })(InvoiceSpec.this.subjectRegistrationFunction))
  }
}
java.lang.AssertionError: assertion failed: 
  Some(payment)
     while compiling: /home/simon/projects/scala/scalatest-compile-error/src/test/scala/payment/InvoiceSpec.scala
        during phase: superaccessors
     library version: version 2.11.2
    compiler version: version 2.11.2
  reconstructed args: -bootclasspath /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/resources.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/rt.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jsse.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jce.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/charsets.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/rhino.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jfr.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/classes:/home/simon/.ivy2/cache/org.scala-lang/scala-library/jars/scala-library-2.11.2.jar -classpath /home/simon/projects/scala/scalatest-compile-error/target/scala-2.11/test-classes:/home/simon/projects/scala/scalatest-compile-error/target/scala-2.11/classes:/home/simon/.ivy2/cache/org.scalatest/scalatest_2.11/bundles/scalatest_2.11-2.2.0.jar:/home/simon/.ivy2/cache/org.scala-lang/scala-reflect/jars/scala-reflect-2.11.1.jar:/home/simon/.ivy2/cache/org.scala-lang.modules/scala-xml_2.11/bundles/scala-xml_2.11-1.0.1.jar

  last tree to typer: ApplyToImplicitArgs(method should)
       tree position: line 8 of /home/simon/projects/scala/scalatest-compile-error/src/test/scala/payment/InvoiceSpec.scala
            tree tpe: Unit
              symbol: method should in trait StringShouldWrapperForVerb
   symbol definition: def should(right: => Unit)(implicit fun: org.scalatest.words.StringVerbBlockRegistration): Unit (a MethodSymbol)
      symbol package: org.scalatest.words
       symbol owners: method should -> trait StringShouldWrapperForVerb -> trait ShouldVerb
           call site: class InvoiceSpec in package payment in package payment

== Source file context for tree position ==

     5 
     6   "The model with invoice" when {
     7     "used with payment" should {
     8 
     9       val payment = Payment(
    10         payer = Some("payer")
    11       )
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:346)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1.apply(SuperAccessors.scala:112)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1.apply(SuperAccessors.scala:109)
    at scala.reflect.internal.TreeInfo$$anonfun$mapMethodParamsAndArgs$1.apply(TreeInfo.scala:231)
    at scala.reflect.internal.TreeInfo$$anonfun$mapMethodParamsAndArgs$1.apply(TreeInfo.scala:231)
    at scala.reflect.internal.util.Collections$class.foreach2(Collections.scala:218)
    at scala.reflect.internal.SymbolTable.foreach2(SymbolTable.scala:16)
    at scala.reflect.internal.TreeInfo.foreachMethodParamAndArg(TreeInfo.scala:245)
    at scala.reflect.internal.TreeInfo.mapMethodParamsAndArgs(TreeInfo.scala:231)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transformArgs(SuperAccessors.scala:109)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:347)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:71)
    at scala.reflect.internal.Trees$$anonfun$itransform$1.apply(Trees.scala:1350)
    at scala.reflect.internal.Trees$$anonfun$itransform$1.apply(Trees.scala:1349)
    at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.atOwner(SuperAccessors.scala:380)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
    at scala.reflect.internal.Trees$class.itransform(Trees.scala:1348)
    at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
    at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
    at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:355)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:71)
    at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
    at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
    at scala.collection.immutable.List.loop$1(List.scala:172)
    at scala.collection.immutable.List.mapConserve(List.scala:188)
    at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
    at scala.reflect.internal.Trees$class.itransform(Trees.scala:1359)
    at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
    at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
    at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:355)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1$$anonfun$apply$2.apply(SuperAccessors.scala:111)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1$$anonfun$apply$2.apply(SuperAccessors.scala:111)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.scala$tools$nsc$typechecker$SuperAccessors$SuperAccTransformer$$withInvalidOwner(SuperAccessors.scala:390)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1.apply(SuperAccessors.scala:111)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1.apply(SuperAccessors.scala:109)
    at scala.reflect.internal.TreeInfo$$anonfun$mapMethodParamsAndArgs$1.apply(TreeInfo.scala:231)
    at scala.reflect.internal.TreeInfo$$anonfun$mapMethodParamsAndArgs$1.apply(TreeInfo.scala:231)
    at scala.reflect.internal.util.Collections$class.foreach2(Collections.scala:218)
    at scala.reflect.internal.SymbolTable.foreach2(SymbolTable.scala:16)
    at scala.reflect.internal.TreeInfo.foreachMethodParamAndArg(TreeInfo.scala:245)
    at scala.reflect.internal.TreeInfo.mapMethodParamsAndArgs(TreeInfo.scala:231)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transformArgs(SuperAccessors.scala:109)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:347)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:347)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1$$anonfun$apply$2.apply(SuperAccessors.scala:111)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1$$anonfun$apply$2.apply(SuperAccessors.scala:111)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.scala$tools$nsc$typechecker$SuperAccessors$SuperAccTransformer$$withInvalidOwner(SuperAccessors.scala:390)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1.apply(SuperAccessors.scala:111)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$transformArgs$1.apply(SuperAccessors.scala:109)
    at scala.reflect.internal.TreeInfo$$anonfun$mapMethodParamsAndArgs$1.apply(TreeInfo.scala:231)
    at scala.reflect.internal.TreeInfo$$anonfun$mapMethodParamsAndArgs$1.apply(TreeInfo.scala:231)
    at scala.reflect.internal.util.Collections$class.foreach2(Collections.scala:218)
    at scala.reflect.internal.SymbolTable.foreach2(SymbolTable.scala:16)
    at scala.reflect.internal.TreeInfo.foreachMethodParamAndArg(TreeInfo.scala:245)
    at scala.reflect.internal.TreeInfo.mapMethodParamsAndArgs(TreeInfo.scala:231)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transformArgs(SuperAccessors.scala:109)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:347)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:71)
    at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:2559)
    at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:2559)
    at scala.collection.immutable.List.loop$1(List.scala:172)
    at scala.collection.immutable.List.mapConserve(List.scala:188)
    at scala.reflect.api.Trees$Transformer.transformTrees(Trees.scala:2559)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$6.apply(SuperAccessors.scala:214)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer$$anonfun$6.apply(SuperAccessors.scala:214)
    at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.atOwner(SuperAccessors.scala:380)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transformTemplate$1(SuperAccessors.scala:214)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:219)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:71)
    at scala.reflect.api.Trees$Transformer.transformTemplate(Trees.scala:2563)
    at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1401)
    at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1400)
    at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.atOwner(SuperAccessors.scala:380)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
    at scala.reflect.internal.Trees$class.itransform(Trees.scala:1399)
    at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
    at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
    at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transformClassDef$1(SuperAccessors.scala:196)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:198)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:71)
    at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
    at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
    at scala.collection.immutable.List.loop$1(List.scala:172)
    at scala.collection.immutable.List.mapConserve(List.scala:188)
    at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
    at scala.reflect.internal.Trees$$anonfun$itransform$7.apply(Trees.scala:1419)
    at scala.reflect.internal.Trees$$anonfun$itransform$7.apply(Trees.scala:1419)
    at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.atOwner(SuperAccessors.scala:380)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
    at scala.reflect.internal.Trees$class.itransform(Trees.scala:1418)
    at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
    at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
    at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:40)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:42)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:42)
    at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.atOwner(SuperAccessors.scala:380)
    at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:42)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:355)
    at scala.tools.nsc.typechecker.SuperAccessors$SuperAccTransformer.transform(SuperAccessors.scala:71)
    at scala.tools.nsc.ast.Trees$Transformer.transformUnit(Trees.scala:147)
    at scala.tools.nsc.transform.Transform$Phase.apply(Transform.scala:30)
    at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:410)
    at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:377)
    at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:377)
    at scala.collection.Iterator$class.foreach(Iterator.scala:743)
    at scala.collection.AbstractIterator.foreach(Iterator.scala:1177)
    at scala.tools.nsc.Global$GlobalPhase.run(Global.scala:377)
    at scala.tools.nsc.Global$Run.compileUnitsInternal(Global.scala:1557)
    at scala.tools.nsc.Global$Run.compileUnits(Global.scala:1542)
    at scala.tools.nsc.Global$Run.compileSources(Global.scala:1537)
    at scala.tools.nsc.Global$Run.compile(Global.scala:1644)
    at xsbt.CachedCompiler0.run(CompilerInterface.scala:123)
    at xsbt.CachedCompiler0.run(CompilerInterface.scala:99)
    at xsbt.CompilerInterface.run(CompilerInterface.scala:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at sbt.compiler.AnalyzingCompiler.call(AnalyzingCompiler.scala:102)
    at sbt.compiler.AnalyzingCompiler.compile(AnalyzingCompiler.scala:48)
    at sbt.compiler.AnalyzingCompiler.compile(AnalyzingCompiler.scala:41)
    at sbt.compiler.AggressiveCompile$$anonfun$3$$anonfun$compileScala$1$1.apply$mcV$sp(AggressiveCompile.scala:99)
    at sbt.compiler.AggressiveCompile$$anonfun$3$$anonfun$compileScala$1$1.apply(AggressiveCompile.scala:99)
    at sbt.compiler.AggressiveCompile$$anonfun$3$$anonfun$compileScala$1$1.apply(AggressiveCompile.scala:99)
    at sbt.compiler.AggressiveCompile.sbt$compiler$AggressiveCompile$$timed(AggressiveCompile.scala:166)
    at sbt.compiler.AggressiveCompile$$anonfun$3.compileScala$1(AggressiveCompile.scala:98)
    at sbt.compiler.AggressiveCompile$$anonfun$3.apply(AggressiveCompile.scala:143)
    at sbt.compiler.AggressiveCompile$$anonfun$3.apply(AggressiveCompile.scala:87)
    at sbt.inc.IncrementalCompile$$anonfun$doCompile$1.apply(Compile.scala:39)
    at sbt.inc.IncrementalCompile$$anonfun$doCompile$1.apply(Compile.scala:37)
    at sbt.inc.IncrementalCommon.cycle(Incremental.scala:99)
    at sbt.inc.Incremental$$anonfun$1.apply(Incremental.scala:38)
    at sbt.inc.Incremental$$anonfun$1.apply(Incremental.scala:37)
    at sbt.inc.Incremental$.manageClassfiles(Incremental.scala:65)
    at sbt.inc.Incremental$.compile(Incremental.scala:37)
    at sbt.inc.IncrementalCompile$.apply(Compile.scala:27)
    at sbt.compiler.AggressiveCompile.compile2(AggressiveCompile.scala:157)
    at sbt.compiler.AggressiveCompile.compile1(AggressiveCompile.scala:71)
    at sbt.compiler.AggressiveCompile.apply(AggressiveCompile.scala:46)
    at sbt.Compiler$.apply(Compiler.scala:75)
    at sbt.Compiler$.apply(Compiler.scala:66)
    at sbt.Defaults$.sbt$Defaults$$compileTaskImpl(Defaults.scala:770)
    at sbt.Defaults$$anonfun$compileTask$1.apply(Defaults.scala:762)
    at sbt.Defaults$$anonfun$compileTask$1.apply(Defaults.scala:762)
    at scala.Function1$$anonfun$compose$1.apply(Function1.scala:47)
    at sbt.$tilde$greater$$anonfun$$u2219$1.apply(TypeFunctions.scala:42)
    at sbt.std.Transform$$anon$4.work(System.scala:64)
    at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:237)
    at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:237)
    at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
    at sbt.Execute.work(Execute.scala:244)
    at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:237)
    at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:237)
    at sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:160)
    at sbt.CompletionService$$anon$2.call(CompletionService.scala:30)
    at java.util.concurrent.FutureTask.run(FutureTask.java:262)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask.run(FutureTask.java:262)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:745)
[error] (test:compile) java.lang.AssertionError: assertion failed: 
[error]   Some(payment)
[error]      while compiling: /home/simon/projects/scala/scalatest-compile-error/src/test/scala/payment/InvoiceSpec.scala
[error]         during phase: superaccessors
[error]      library version: version 2.11.2
[error]     compiler version: version 2.11.2
[error]   reconstructed args: -bootclasspath /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/resources.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/rt.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jsse.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jce.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/charsets.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/rhino.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jfr.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/classes:/home/simon/.ivy2/cache/org.scala-lang/scala-library/jars/scala-library-2.11.2.jar -classpath /home/simon/projects/scala/scalatest-compile-error/target/scala-2.11/test-classes:/home/simon/projects/scala/scalatest-compile-error/target/scala-2.11/classes:/home/simon/.ivy2/cache/org.scalatest/scalatest_2.11/bundles/scalatest_2.11-2.2.0.jar:/home/simon/.ivy2/cache/org.scala-lang/scala-reflect/jars/scala-reflect-2.11.1.jar:/home/simon/.ivy2/cache/org.scala-lang.modules/scala-xml_2.11/bundles/scala-xml_2.11-1.0.1.jar
[error] 
[error]   last tree to typer: ApplyToImplicitArgs(method should)
[error]        tree position: line 8 of /home/simon/projects/scala/scalatest-compile-error/src/test/scala/payment/InvoiceSpec.scala
[error]             tree tpe: Unit
[error]               symbol: method should in trait StringShouldWrapperForVerb
[error]    symbol definition: def should(right: => Unit)(implicit fun: org.scalatest.words.StringVerbBlockRegistration): Unit (a MethodSymbol)
[error]       symbol package: org.scalatest.words
[error]        symbol owners: method should -> trait StringShouldWrapperForVerb -> trait ShouldVerb
[error]            call site: class InvoiceSpec in package payment in package payment
[error] 
[error] == Source file context for tree position ==
[error] 
[error]      5 
[error]      6   "The model with invoice" when {
[error]      7     "used with payment" should {
[error]      8 
[error]      9       val payment = Payment(
[error]     10         payer = Some("payer")
[error]     11       )
[error] Total time: 4 s, completed Sep 8, 2014 10:46:31 PM
```

when I removed the last test with {code}val payer = invoice.payment.value.payer {code} ([https://github.com/yanns/scalatest-compile-error/blob/master/src/test/scala/payment/InvoiceSpec.scala#L28]), it works as expected:
```
Detected sbt version 0.13.5
[info] Loading global plugins from /home/simon/.sbt/0.13/plugins
[info] Loading project definition from /home/simon/projects/scala/scalatest-compile-error/project
[info] Set current project to scalatest-compile-error (in build file:/home/simon/projects/scala/scalatest-compile-error/)
[info] Compiling 1 Scala source to /home/simon/projects/scala/scalatest-compile-error/target/scala-2.11/test-classes...
[info] InvoiceSpec:
[info] The model with invoice
[info]   when used with payment
[info]   - should contains the field payment
[info]   - should contains the field payment.payer
[info] Run completed in 332 milliseconds.
[info] Total number of tests run: 2
[info] Suites: completed 1, aborted 0
[info] Tests: succeeded 2, failed 0, canceled 0, ignored 0, pending 0
[info] All tests passed.
[success] Total time: 7 s, completed Sep 8, 2014 10:49:12 PM
```

If I let the last test with {code}val payer = invoice.payment.value.payer {code} but remove the {code}id: Option[String] = None{code} [https://github.com/yanns/scalatest-compile-error/blob/master/src/main/scala/payment/Invoice.scala#L6] from Invoice, it compiles also fine. 

I wrote the project on GitHub to reproduce the error with the minimal amount of code that I can share.

This error happened before in one "real" project that I cannot share.
In that project, the error is quite different:
(I replace the sensible information with <placeholder>
```
[info] Compiling 1 Scala source to [project]/test-classes...
[trace] Stack trace suppressed: run last test:compile for the full output.
[error] (test:compile) java.lang.NullPointerException
[error] Total time: 3 s, completed Sep 10, 2014 8:04:36 AM

$ last test:compile
[debug] 
[debug] Initial source changes: 
[debug] 	removed:Set()
[debug] 	added: Set()
[debug] 	modified: Set(<TestClass>)
[debug] Removed products: Set()
[debug] External API changes: API Changes: Set()
[debug] Modified binary dependencies: Set()
[debug] Initial directly invalidated sources: Set(<TestClass>)
[debug] 
[debug] Sources indirectly invalidated by:
[debug] 	product: Set()
[debug] 	binary dep: Set()
[debug] 	external source: Set()
[debug] All initially invalidated sources: Set(<TestClass>)
[info] Compiling 1 Scala source to <projec>]/target/scala-2.11/test-classes...
[debug] Getting compiler-interface from component compiler for Scala 2.11.2
[debug] Getting compiler-interface from component compiler for Scala 2.11.2
[debug] Running cached compiler 2436822a, interfacing (CompilerInterface) with Scala compiler version 2.11.2
[debug] Calling Scala compiler with arguments  (CompilerInterface):
[debug] 	-deprecation
[debug] 	-unchecked
[debug] 	-encoding
[debug] 	utf8
[debug] 	-Xmax-classfile-name
[debug] 	128
[debug] 	-deprecation
[debug] 	-unchecked
[debug] 	-feature
[debug] 	-Xmax-classfile-name
[debug] 	128
[debug] 	-deprecation
[debug] 	-unchecked
[debug] 	-feature
[debug] 	-bootclasspath
[debug] 	/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/resources.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/rt.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jsse.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jce.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/charsets.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/rhino.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/jfr.jar:/usr/lib/jvm/java-7-openjdk-amd64/jre/classes:/home/simon/.ivy2/cache/org.scala-lang/scala-library/jars/scala-library-2.11.2.jar
[debug] 	-classpath
<classpath>
java.lang.NullPointerException
	at scala.tools.nsc.ast.TreeInfo$ValueClass$$anonfun$valueUnbox$1.apply(TreeInfo.scala:45)
	at scala.tools.nsc.ast.TreeInfo$ValueClass$$anonfun$valueUnbox$1.apply(TreeInfo.scala:45)
	at scala.reflect.internal.SymbolTable.enteringPhase(SymbolTable.scala:235)
	at scala.tools.nsc.ast.TreeInfo$ValueClass$.valueUnbox(TreeInfo.scala:45)
	at scala.tools.nsc.ast.TreeInfo$ValueClass$Unbox$.unapply(TreeInfo.scala:50)
	at scala.tools.nsc.ast.TreeInfo$ValueClass$BoxAndUnbox$.unapply(TreeInfo.scala:63)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:37)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.internal.Trees$$anonfun$itransform$2.apply(Trees.scala:1356)
	at scala.reflect.internal.Trees$$anonfun$itransform$2.apply(Trees.scala:1354)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1353)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1397)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:40)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer.transformTemplate(Trees.scala:2563)
	at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1401)
	at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1400)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1399)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1359)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:2559)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:2559)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformTrees(Trees.scala:2559)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1340)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1359)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.internal.Trees$$anonfun$itransform$2.apply(Trees.scala:1356)
	at scala.reflect.internal.Trees$$anonfun$itransform$2.apply(Trees.scala:1354)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1353)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1397)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:40)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer.transformTemplate(Trees.scala:2563)
	at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1401)
	at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1400)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1399)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1359)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:2559)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:2559)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformTrees(Trees.scala:2559)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1340)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.internal.Trees$$anonfun$itransform$2.apply(Trees.scala:1356)
	at scala.reflect.internal.Trees$$anonfun$itransform$2.apply(Trees.scala:1354)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1353)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1397)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:40)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer.transformTemplate(Trees.scala:2563)
	at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1401)
	at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1400)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1399)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1359)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:2559)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformTrees$1.apply(Trees.scala:2559)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformTrees(Trees.scala:2559)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1340)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1$$anonfun$apply$2.apply(Trees.scala:2588)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1$$anonfun$apply$2.apply(Trees.scala:2588)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2588)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1397)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$1.apply(TypingTransformers.scala:40)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer.transformTemplate(Trees.scala:2563)
	at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1401)
	at scala.reflect.internal.Trees$$anonfun$itransform$4.apply(Trees.scala:1400)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1399)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:44)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2589)
	at scala.reflect.api.Trees$Transformer$$anonfun$transformStats$1.apply(Trees.scala:2587)
	at scala.collection.immutable.List.loop$1(List.scala:172)
	at scala.collection.immutable.List.mapConserve(List.scala:188)
	at scala.reflect.api.Trees$Transformer.transformStats(Trees.scala:2587)
	at scala.reflect.internal.Trees$$anonfun$itransform$7.apply(Trees.scala:1419)
	at scala.reflect.internal.Trees$$anonfun$itransform$7.apply(Trees.scala:1419)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:25)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:17)
	at scala.reflect.internal.Trees$class.itransform(Trees.scala:1418)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.internal.SymbolTable.itransform(SymbolTable.scala:16)
	at scala.reflect.api.Trees$Transformer.transform(Trees.scala:2555)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.scala$tools$nsc$transform$TypingTransformers$TypingTransformer$$super$transform(TypingTransformers.scala:40)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:42)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer$$anonfun$transform$2.apply(TypingTransformers.scala:42)
	at scala.reflect.api.Trees$Transformer.atOwner(Trees.scala:2600)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.atOwner(TypingTransformers.scala:30)
	at scala.tools.nsc.transform.TypingTransformers$TypingTransformer.transform(TypingTransformers.scala:42)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:35)
	at scala.tools.nsc.transform.PostErasure$PostErasureTransformer.transform(PostErasure.scala:22)
	at scala.tools.nsc.ast.Trees$Transformer.transformUnit(Trees.scala:147)
	at scala.tools.nsc.transform.Transform$Phase.apply(Transform.scala:30)
	at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:410)
	at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:377)
	at scala.tools.nsc.Global$GlobalPhase$$anonfun$run$1.apply(Global.scala:377)
	at scala.collection.Iterator$class.foreach(Iterator.scala:743)
	at scala.collection.AbstractIterator.foreach(Iterator.scala:1177)
	at scala.tools.nsc.Global$GlobalPhase.run(Global.scala:377)
	at scala.tools.nsc.Global$Run.compileUnitsInternal(Global.scala:1557)
	at scala.tools.nsc.Global$Run.compileUnits(Global.scala:1542)
	at scala.tools.nsc.Global$Run.compileSources(Global.scala:1537)
	at scala.tools.nsc.Global$Run.compile(Global.scala:1644)
	at xsbt.CachedCompiler0.run(CompilerInterface.scala:123)
	at xsbt.CachedCompiler0.run(CompilerInterface.scala:99)
	at xsbt.CompilerInterface.run(CompilerInterface.scala:27)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at sbt.compiler.AnalyzingCompiler.call(AnalyzingCompiler.scala:102)
	at sbt.compiler.AnalyzingCompiler.compile(AnalyzingCompiler.scala:48)
	at sbt.compiler.AnalyzingCompiler.compile(AnalyzingCompiler.scala:41)
	at sbt.compiler.AggressiveCompile$$anonfun$3$$anonfun$compileScala$1$1.apply$mcV$sp(AggressiveCompile.scala:99)
	at sbt.compiler.AggressiveCompile$$anonfun$3$$anonfun$compileScala$1$1.apply(AggressiveCompile.scala:99)
	at sbt.compiler.AggressiveCompile$$anonfun$3$$anonfun$compileScala$1$1.apply(AggressiveCompile.scala:99)
	at sbt.compiler.AggressiveCompile.sbt$compiler$AggressiveCompile$$timed(AggressiveCompile.scala:166)
	at sbt.compiler.AggressiveCompile$$anonfun$3.compileScala$1(AggressiveCompile.scala:98)
	at sbt.compiler.AggressiveCompile$$anonfun$3.apply(AggressiveCompile.scala:143)
	at sbt.compiler.AggressiveCompile$$anonfun$3.apply(AggressiveCompile.scala:87)
	at sbt.inc.IncrementalCompile$$anonfun$doCompile$1.apply(Compile.scala:39)
	at sbt.inc.IncrementalCompile$$anonfun$doCompile$1.apply(Compile.scala:37)
	at sbt.inc.IncrementalCommon.cycle(Incremental.scala:99)
	at sbt.inc.Incremental$$anonfun$1.apply(Incremental.scala:38)
	at sbt.inc.Incremental$$anonfun$1.apply(Incremental.scala:37)
	at sbt.inc.Incremental$.manageClassfiles(Incremental.scala:65)
	at sbt.inc.Incremental$.compile(Incremental.scala:37)
	at sbt.inc.IncrementalCompile$.apply(Compile.scala:27)
	at sbt.compiler.AggressiveCompile.compile2(AggressiveCompile.scala:157)
	at sbt.compiler.AggressiveCompile.compile1(AggressiveCompile.scala:71)
	at sbt.compiler.AggressiveCompile.apply(AggressiveCompile.scala:46)
	at sbt.Compiler$.apply(Compiler.scala:75)
	at sbt.Compiler$.apply(Compiler.scala:66)
	at sbt.Defaults$.sbt$Defaults$$compileTaskImpl(Defaults.scala:770)
	at sbt.Defaults$$anonfun$compileTask$1.apply(Defaults.scala:762)
	at sbt.Defaults$$anonfun$compileTask$1.apply(Defaults.scala:762)
	at scala.Function1$$anonfun$compose$1.apply(Function1.scala:47)
	at sbt.$tilde$greater$$anonfun$$u2219$1.apply(TypeFunctions.scala:42)
	at sbt.std.Transform$$anon$4.work(System.scala:64)
	at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:237)
	at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:237)
	at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
	at sbt.Execute.work(Execute.scala:244)
	at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:237)
	at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:237)
	at sbt.ConcurrentRestrictions$$anon$4$$anonfun$1.apply(ConcurrentRestrictions.scala:160)
	at sbt.CompletionService$$anon$2.call(CompletionService.scala:30)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
[error] (test:compile) java.lang.NullPointerException
```
This is most likely a bug in one of Scalatest's macros. We don't have the resources to minimize this, sorry.
That thing where you want to know if it's a named arg or an assignment.

The workaround is to supply the type of the payer variable.

Mini-me of https://github.com/cheeseng/scalatest-compile-error/blob/without-scalatest/src/test/scala/payment/InvoiceSpec.scala

```scala
    locally {
      val p = Payment(payer = Some("payer"))

      val invoice = Invoice(None, Some(p))

      val payer = invoice.payment.get.payer
      //val payer: Option[String] = invoice.payment.get.payer
    }
```
Unhappy:
```
    scala.this.Predef.locally[Unit]({
      val p: payment.Payment = Payment.apply(scala.Some.apply[String]("payer"));
      val <invoice: error>: <error> = Invoice(None, Some(p));
      val <payer: error>: <error> = <invoice: error>.<payment: error>.<get: error>.<payer: error>;
      ()
    })
```
It would have been more fun if it implicated the `payment` named arg to `Invoice`, since there was a variable and also a package with that name. The possibilities are endless.

I wonder if typelevel scala has come up with a flag to invent names for me. Because when I'm writing a payment system, I'm quickly tapped out.

Or maybe ironic French quotes, `f(<<i>> = 42)`, or just `f('i = 42)`.
If I understand correctly, there is a clash between the named parameter `payer` and the local `payer` value.

But the scope of the named parameter should be limited to the method call, shouldn't it?

```scala
val p = Payment(payer = Some("payer"))
```
and 
```scala
val p = Payment(Some("payer"))
```
should be the equivalent, given that Payment only have one parameter.

And the last one compiles just fine.
> But the scope of the named parameter should be limited to the method call, shouldn't it?

Yes. The issue is that the local value is also in scope, and Scala has to make a decision whether `payer = Some("payer")` is an assignment or usage of a named parameter.

The second one compiles, because a decision is not required in this case.
But `val p = Payment(payer = Some("payer"))` cannot be an assignment for `payer`, can it?


Here's my minimization:

```scala
class Cell(val ambiguousName: Option[String])

class Test {
  def wrap(f: Any): Nothing = ???

  wrap  { // when block's not in argument position, we get a weird, though expected, error 
    val c = new Cell(ambiguousName = Some("bla"))

    // do either to make this compile:
    //  - change name of local val
    //  - assign type to local val
    val ambiguousName = c.ambiguousName
  }
}
```
Should the Scala compiler be able to resolve the ambiguity?
It is clear that `val c = new Cell(ambiguousName = Some("bla"))` is a named parameter call, isn't it?
in order to find that out (that it is a named parameter call), it needs to type check the expression `ambiguousName = Some("bla")`, to know whether that could be a valid assignment. For that, it needs to know the type of `ambiguousName`, which needs to be inferred. this type in turn depends on the type of `c`, which also needs to be inferred. this type then depends again on the type of `ambiguousName`, so we have a cyclic dependency.
