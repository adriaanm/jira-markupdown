If you look in TreePrinters you'll see that I've dealt with this issue so many times I started writing SafeTreePrinter.  It isn't used anywhere yet, but I'd sure be thrilled if we used something like that by default.  See also SI-1709.
