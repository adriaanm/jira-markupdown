Encountering this bug in scalaz.FingerTree. Haven't found a workaround.

Check out from here:
git://github.com/runarorama/scalaz.git

And compile the following:


{code}
object Bug {
  import scalaz._
  import Scalaz._
  val f = (a: FingerTree[Int, String] => a.viewr)
}
{code}


{code}
scala> import scalaz._
import scalaz._

scala> import Scalaz._
import Scalaz._

scala> import FingerTree._
import FingerTree._

scala> implicit def sizeReducer[A] = Reducer((a: A) => 1)
sizeReducer: [A]scalaz.Reducer[A,Int]

scala> empty[Int, String]
res0: scalaz.FingerTree[Int,String] = 0 []

scala> res0.viewr
java.lang.Error: B in class FingerTree cannot be instantiated from scalaz.FingerTree[Int,String]
        at scala.tools.nsc.symtab.SymbolTable.abort(SymbolTable.scala:33)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.throwError$$1(Types.scala:3177)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.instParam$$1(Types.scala:3180)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.toInstance$$1(Types.scala:3191)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3207)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3085)
        at scala.tools.nsc.symtab.Types$$TypeMap$$$$anonfun$$mapOverArgs$$1.apply(Types.scala:2919)
        at scala.tools.nsc.symtab.Types$$TypeMap$$$$anonfun$$mapOverArgs$$1.apply(Types.scala:2915)
        at scala.tools.nsc.symtab.Types$$class.map2Conserve(Types.scala:4607)
        at scala.tools.nsc.symtab.SymbolTable.map2Conserve(SymbolTable.scala:13)
        at scala.tools.nsc.symtab.Types$$class.map2Conserve(Types.scala:4608)
        at scala.tools.nsc.symtab.SymbolTable.map2Conserve(SymbolTable.scala:13)
        at scala.tools.nsc.symtab.Types$$TypeMap.mapOverArgs(Types.scala:2915)
        at scala.tools.nsc.symtab.Types$$TypeMap.mapOver(Types.scala:2825)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3209)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3085)
        at scala.tools.nsc.symtab.Types$$TypeMap.mapOver(Types.scala:2849)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3209)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3085)
        at scala.tools.nsc.symtab.Types$$TypeMap$$$$anonfun$$mapOverArgs$$1.apply(Types.scala:2919)
        at scala.tools.nsc.symtab.Types$$TypeMap$$$$anonfun$$mapOverArgs$$1.apply(Types.scala:2915)
        at scala.tools.nsc.symtab.Types$$class.map2Conserve(Types.scala:4607)
        at scala.tools.nsc.symtab.SymbolTable.map2Conserve(SymbolTable.scala:13)
        at scala.tools.nsc.symtab.Types$$TypeMap.mapOverArgs(Types.scala:2915)
        at scala.tools.nsc.symtab.Types$$TypeMap.mapOver(Types.scala:2825)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3209)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3085)
        at scala.tools.nsc.symtab.Types$$TypeMap.mapOver(Types.scala:2849)
        at scala.tools.nsc.symtab.Types$$AsSeenFromMap.apply(Types.scala:3209)
        at scala.tools.nsc.symtab.Types$$Type.asSeenFrom(Types.scala:507)
        at scala.tools.nsc.symtab.Types$$Type.computeMemberType(Types.scala:531)
        at scala.tools.nsc.symtab.Symbols$$MethodSymbol.typeAsMemberOf(Symbols.scala:1774)
        at scala.tools.nsc.symtab.Types$$Type.memberType(Types.scala:522)
        at scala.tools.nsc.typechecker.Infer$$Inferencer.checkAccessible(Infer.scala:278)
        at scala.tools.nsc.typechecker.Typers$$Typer.makeAccessible(Typers.scala:591)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedSelect$$1(Typers.scala:3509)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3985)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4139)
        at scala.tools.nsc.typechecker.Typers$$Typer.computeType(Typers.scala:4215)
        at scala.tools.nsc.typechecker.Namers$$Namer.typeSig(Namers.scala:1174)
        at scala.tools.nsc.typechecker.Namers$$Namer$$$$anonfun$$typeCompleter$$1.apply(Namers.scala:517)
        at scala.tools.nsc.typechecker.Namers$$Namer$$$$anonfun$$typeCompleter$$1.apply(Namers.scala:515)
        at scala.tools.nsc.typechecker.Namers$$$$anon$$1.complete(Namers.scala:1338)
        at scala.tools.nsc.typechecker.Namers$$$$anon$$1.complete(Namers.scala:1336)
        at scala.tools.nsc.symtab.Symbols$$Symbol.info(Symbols.scala:743)
        at scala.tools.nsc.symtab.Symbols$$Symbol.initialize(Symbols.scala:855)
        at scala.tools.nsc.symtab.Symbols$$Symbol.annotations(Symbols.scala:111)
        at scala.tools.nsc.typechecker.Typers$$Typer.addGetterSetter(Typers.scala:1334)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$10.apply(Typers.scala:1505)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$10.apply(Typers.scala:1505)
        at scala.collection.TraversableLike$$$$anonfun$$flatMap$$1.apply(TraversableLike.scala:227)
        at scala.collection.TraversableLike$$$$anonfun$$flatMap$$1.apply(TraversableLike.scala:227)
        at scala.collection.LinearSeqOptimized$$class.foreach(LinearSeqOptimized.scala:61)
        at scala.collection.immutable.List.foreach(List.scala:45)
        at scala.collection.TraversableLike$$class.flatMap(TraversableLike.scala:227)
        at scala.collection.immutable.List.flatMap(List.scala:45)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1505)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1507)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1507)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1507)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1507)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1507)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1507)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1507)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedTemplate(Typers.scala:1507)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedModuleDef(Typers.scala:1312)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3736)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStat$$1(Typers.scala:2067)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer$$$$anonfun$$20.apply(Typers.scala:2135)
        at scala.collection.immutable.List.loop$$1(List.scala:115)
        at scala.collection.immutable.List.mapConserve(List.scala:132)
        at scala.tools.nsc.typechecker.Typers$$Typer.typedStats(Typers.scala:2135)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed1(Typers.scala:3729)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4078)
        at scala.tools.nsc.typechecker.Typers$$Typer.typed(Typers.scala:4126)
        at scala.tools.nsc.typechecker.Analyzer$$typerFactory$$$$anon$$3.apply(Analyzer.scala:85)
        at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$applyPhase$$1.apply(Global.scala:276)
        at scala.tools.nsc.Global$$GlobalPhase$$$$anonfun$$applyPhase$$1.apply(Global.scala:276)
        at scala.tools.nsc.reporters.Reporter.withSource(Reporter.scala:48)
        at scala.tools.nsc.Global$$GlobalPhase.applyPhase(Global.scala:276)
        at scala.tools.nsc.typechecker.Analyzer$$typerFactory$$$$anon$$3$$$$anonfun$$run$$1.apply(Analyzer.scala:80)
        at scala.tools.nsc.typechecker.Analyzer$$typerFactory$$$$anon$$3$$$$anonfun$$run$$1.apply(Analyzer.scala:80)
        at scala.collection.Iterator$$class.foreach(Iterator.scala:631)
        at scala.collection.mutable.ListBuffer$$$$anon$$1.foreach(ListBuffer.scala:304)
        at scala.tools.nsc.typechecker.Analyzer$$typerFactory$$$$anon$$3.run(Analyzer.scala:80)
        at scala.tools.nsc.Global$$Run.compileSources(Global.scala:733)
        at scala.tools.nsc.Interpreter.compileAndSaveRun(Interpreter.scala:516)
        at scala.tools.nsc.Interpreter$$Request.objRun(Interpreter.scala:890)
        at scala.tools.nsc.Interpreter$$Request.compile(Interpreter.scala:913)
        at scala.tools.nsc.Interpreter.interpret(Interpreter.scala:596)
        at scala.tools.nsc.Interpreter.interpret(Interpreter.scala:575)
        at scala.tools.nsc.InterpreterLoop.reallyInterpret$$1(InterpreterLoop.scala:471)
        at scala.tools.nsc.InterpreterLoop.interpretStartingWith(InterpreterLoop.scala:514)
        at scala.tools.nsc.InterpreterLoop.command(InterpreterLoop.scala:361)
        at scala.tools.nsc.InterpreterLoop.processLine$$1(InterpreterLoop.scala:242)
        at scala.tools.nsc.InterpreterLoop.repl(InterpreterLoop.scala:248)
        at scala.tools.nsc.InterpreterLoop.main(InterpreterLoop.scala:558)
        at xsbt.ConsoleInterface.run(ConsoleInterface.scala:26)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at xsbt.AnalyzingCompiler.call(AnalyzingCompiler.scala:40)
        at xsbt.AnalyzingCompiler.console(AnalyzingCompiler.scala:32)
        at sbt.Console.console0$$1(Compile.scala:140)
        at sbt.Console$$$$anonfun$$apply$$4$$$$anonfun$$apply$$5.apply(Compile.scala:141)
        at sbt.Console$$$$anonfun$$apply$$4$$$$anonfun$$apply$$5.apply(Compile.scala:141)
        at sbt.TrapExit$$.executeMain$$1(TrapExit.scala:33)
        at sbt.TrapExit$$$$anon$$1.run(TrapExit.scala:42)
[info] == console ==
[error] Error running console: Nonzero exit code: 1
[info]
{code}


