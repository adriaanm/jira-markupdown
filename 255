What was the problem with the fix that was reverted? If noone else has time I'll take a look at it, and it'd help if I knew what went wrong with the last attempt.
