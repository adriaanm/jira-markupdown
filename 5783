Looks very similar to scala/bug#4380.  Duplicating myself again!
