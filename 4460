(In r24007) second version of close scala/bug#3649. no review
