Fixed in rev r 13169

The three main changes are[[BR]]
- fixed NaN handling (use of "compare" method instead of "<", "<=", etc.)[[BR]]
- refactored code for Int/Double/Float arrays[[BR]]
- added "main" method to run some tests (including SI-202 example)
