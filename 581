It's because both the implicit and the foo method do not have a return type, yet they are mutually recursive. So the implicit is not yet fully typed, and therefore not available when the function `foo' is typed. Add a return type to either the implicit or the method and it compiles. I'd recommend to always write out return types of implicits to avoid this kind of problem.
