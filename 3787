BTW, I think we could fix Ticket scala/bug#2634 in a very simple way after this ticket be fixed.
