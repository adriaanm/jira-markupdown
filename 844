This also happens with the simpler example
{code}
  case class Foo(x : Int)
  case class Bar(y : Int) extends Foo(y)

  (Bar : AnyRef) match {
    case Bar(x) => 0
    case Foo(x) => 1
  }
{code}
