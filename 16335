The valueOfTerm method of scala.tools.nsc.interpreter.IMain seems to be broken in 2.9.1 RC2, whereas it works as expected in 2.9.0.1.  See transcripts from both versions below.


########### 2.9.1.RC2 ##############

Welcome to Scala version 2.9.1.RC2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_26).
Type in expressions to have them evaluated.
Type :help for more information.

scala> val n = new scala.tools.nsc.interpreter.IMain()
n: scala.tools.nsc.interpreter.IMain = scala.tools.nsc.interpreter.IMain@f4f7a86

scala> n.interpret("val a = 2+3")
a: Int = 5
res0: scala.tools.nsc.interpreter.package.IR.Result = Success

scala> n.valueOfTerm("a") == Some(5)   // Should be true!
res1: Boolean = false



########### 2.9.0.1 ##############

Welcome to Scala version 2.9.0.1 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_26).
Type in expressions to have them evaluated.
Type :help for more information.

scala> val n = new scala.tools.nsc.interpreter.IMain()
n: scala.tools.nsc.interpreter.IMain = scala.tools.nsc.interpreter.IMain@34ae19a

scala> n.interpret("val a = 2+3")
a: Int = 5
res0: scala.tools.nsc.interpreter.Results.Result = Success

scala> n.valueOfTerm("a") == Some(5)  // Is true, as it should be
res1: Boolean = true

