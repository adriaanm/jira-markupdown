When targeting Android, Iulian suggested on the mailing list that ProGuard should be able to inline the getter. But I am not able to get ProGuard to do so.

{code:title=invokeVirtual.scala|borderStyle=solid}
package com.test.invoke

final class AtomTest(vIn:Int) {
  final val v = vIn

  def square = v*v
}
{code}


{code:title=Run compiler|borderStyle=solid}
/opt/scala-2.9.0.1/bin/scalac -d outDir -optimize invokeVirtual.scala
{code}


{code:title=Run ProGuard|borderStyle=solid}
$JAVA_HOME/bin/java -jar ~/tmp/co/proguard4.6/lib/proguard.jar 
  -injars outDir 
  -libraryjars /opt/scala-2.9.0.1/lib/scala-library.jar
  -libraryjars $JAVA_HOME/jre/lib/rt.jar
  -keep "class com.test.invoke.* {public <methods>;}"
  -outjars invokeVirtual.jar
  -optimizationpasses 2
{code}


{code:title=Disassembly|borderStyle=solid}
javap -classpath invokeVirtual.jar -c com.test.invoke.AtomTest
public final int square();
  Code:
   0:   aload_0
   1:   invokevirtual   #5; //Method v:()I
   4:   aload_0
   5:   invokevirtual   #5; //Method v:()I
   8:   imul
   9:   ireturn


{code}
