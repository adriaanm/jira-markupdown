It appears that modifying {{_.values.headOption}} to {{_.readOnlySnapshot.values.headOption}} in my code fixes the problem, but it seems like highly unexpected behavior that the semantics of these differ (i.e. every iterator returned by functions on a {{TrieMap}} should be over a {{readOnlySnapshot}}, since this is the core feature advertised in the documention: {quote}It supports O(1), atomic, lock-free snapshots which are used to implement linearizable lock-free size, iterator and clear operations{quote})
