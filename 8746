Looks like there was a regression when moving from 2.11.7 to  2.11.8. As before, using explicit braces works for me, unitil there is more than one package in a snippet. Oddly, if the packages depend on each other, everything works fine, no braces required: 
```scala
"""package example
  |     
  |case class Person(vehicle: test.major.Vehicle)
  |     
  |package test.major
  |    
  |case class Vehicle(name: String)""".stripMargin
```

Let me know if you'd like me to file a new issue.
