One heuristic is that if line 2 fails with a syntax error, try again with line 1 + line 2.

This works exactly if line 1 is a prefix of the combined input that compiles.

You could capture more errors by retrying with typer errors, for example, postfix expressions that are currently handled by the leading-dot syntax:

```
> List("one"->2)
> toMap
```
but I'm guessing there are edge cases.
