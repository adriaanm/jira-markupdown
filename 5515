This is a duplicate of scala/bug#3050.  (But I really appreciate the nice tight test case.)
