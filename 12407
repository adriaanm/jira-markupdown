looks closely related to scala/bug#9383
